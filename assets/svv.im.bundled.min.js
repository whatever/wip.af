var svv=function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="assets/",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.SubtitleScript=e.Subtitle=e.TriangleClipGrid=e.TriangleMesh=e.WillApp=e.WaveApp=e.WavveyApp=e.TriangleClipGridApp=e.TriOverlapApp=e.StarfieldApp=e.SplotchApp=e.SmileApp=e.ShadyHillApp=e.RibbonApp=e.QuentinApp=e.OverlapApp=e.InstancedHillApp=e.KanyeApp=e.HolyApp=e.GraveyardApp=e.GrassApp=e.GoldGridApp=e.GeodeApp=e.FlatApp=e.FlowApp=e.FaceApp=e.DripApp=e.DontYouThinkApp=e.CubeApp=e.Diagonal01App=e.CouchApp=e.CircleGridApp=e.CircleApp=void 0;var r=i(26),o=n(r),a=i(27),s=n(a),h=i(28),u=n(h),c=i(29),l=n(c),f=i(30),p=n(f),d=i(31),v=n(d),y=i(32),w=n(y),m=i(33),g=n(m),b=i(34),M=n(b),k=i(35),_=n(k),P=i(37),x=n(P),E=i(38),O=n(E),S=i(39),j=n(S),T=i(40),A=n(T),L=i(41),C=n(L),z=i(42),R=n(z),G=i(43),I=n(G),H=i(44),F=n(H),V=i(45),B=n(V),D=i(46),W=n(D),N=i(47),q=n(N),U=i(48),K=n(U),J=i(49),Y=(n(J),i(50)),X=n(Y),Z=i(51),Q=n(Z),$=i(52),tt=n($),et=i(53),it=n(et),nt=i(54),rt=n(nt),ot=i(36),at=i(25),st=n(at),ht=i(11),ut=n(ht),ct=i(61);i(55);e.CircleApp=o.default,e.CircleGridApp=s.default,e.CouchApp=u.default,e.Diagonal01App=p.default,e.CubeApp=l.default,e.DontYouThinkApp=v.default,e.DripApp=w.default,e.FaceApp=g.default,e.FlowApp=M.default,e.FlatApp=ot.FlatApp,e.GeodeApp=_.default,e.GoldGridApp=ot.GoldGridApp,e.GrassApp=x.default,e.GraveyardApp=O.default,e.HolyApp=j.default,e.KanyeApp=C.default,e.InstancedHillApp=A.default,e.OverlapApp=R.default,e.QuentinApp=I.default,e.RibbonApp=F.default,e.ShadyHillApp=B.default,e.SmileApp=W.default,e.SplotchApp=q.default,e.StarfieldApp=K.default,e.TriOverlapApp=X.default,e.TriangleClipGridApp=Q.default,e.WavveyApp=it.default,e.WaveApp=tt.default,e.WillApp=rt.default,e.TriangleMesh=ut.default,e.TriangleClipGrid=st.default,e.Subtitle=ct.Subtitle,e.SubtitleScript=ct.SubtitleScript},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){i(this,t)}return n(t,[{key:"setup",value:function(t){throw new Error("Calling empty setup function")}},{key:"update",value:function(t){throw new Error("Calling empty update function")}},{key:"draw",value:function(){throw new Error("Calling empty draw function")}},{key:"loop",value:function(t){requestAnimationFrame(function(){this.loop(t)}.bind(this)),this.update(t),this.draw()}}]),t}();e.default=r},function(t,e){"use strict";function i(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}function n(t,e){var i=1;return e=h(e),s(e,i)}function r(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function o(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]}function a(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function s(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function h(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return 0==e?[0,0,0]:[t[0]/e,t[1]/e,t[2]/e]}Object.defineProperty(e,"__esModule",{value:!0}),e.norm=i,e.proj=n,e.cross=r,e.add=o,e.sub=a,e.scale=s,e.normalize=h},function(t,e){t.exports=THREE},function(t,e){"use strict";function i(t){return t[Math.floor(Math.random()*t.length)]}function n(t,e,i){for(var n=new Array(t),r=0;r<t;r++){n[r]=new Array(e);for(var o=0;o<e;o++)n[r][o]=new Array(i)}return n}function r(t,e,i){return"rgb("+t+", "+e+", "+i+")"}function o(t,e){return t+Math.random()*(e-t)}function a(t){return parseInt(t.substring(1),16)}function s(t,e){var i=Math.pow(10,e);return Math.round(i*t)/i}function h(t){var e=c(t,3),i=e[0],n=e[1],r=e[2];return[s(i*Math.sin(n)*Math.cos(r),3),s(i*Math.sin(n)*Math.sin(r),3),s(i*Math.cos(n),3)]}function u(t){var e=c(t,3),i=e[0],n=e[1],r=e[2];return r=Math.PI/2-r,[i*Math.sin(r)*Math.sin(n),i*Math.cos(r),i*Math.sin(r)*Math.cos(n)]}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.select=i,e.makeArray3=n,e.rgb=r,e.random=o,e.stringToHex=a,e.round=s,e.cartesian=h,e.longlat=u;var l=function(){var t=+new Date;return function(){return(new Date-t)/1e3}}();e.getElapsedTime=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=i(57),l=i(2),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"quentin",value:function(t,e,i){i=i||50;var n=this.camera.view_angle*Math.PI/2,r=24*Math.PI/2,o=(0,c.line)(t,e,i);(0,c.line)(n,r,i),(0,l.add)((0,l.scale)(t,1-o),(0,l.scale)(e,o));console.log("...same chains")}},{key:"getPlane",value:function(t,e,i){var n=(0,l.sub)(i,e),r=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),o=t*Math.PI/180,a=2*r*Math.tan(o/2)/2-.02;return[[i[0]-a,i[1]-a,i[2]],[i[0]+a,i[1]-a,i[2]],[i[0]-a,i[1]+a,i[2]],[i[0]+a,i[1]+a,i[2]]]}},{key:"getPlaneWidth",value:function(t,e,i){var n=(0,l.sub)(i,e),r=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),o=t*Math.PI/180,a=2*r*Math.tan(o/2);return a}},{key:"getFov",value:function(t,e,i){var n=(0,l.sub)(i,e),r=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),o=2*Math.atan(t/2/r)*180/Math.PI;return o}}]),e}(u.default);e.default=f},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(3),h=n(s),u=i(2),c=function(){function t(e){r(this,t),this.params=e,this.pieces=[],this.slopes=[],this.normals=[],this.directionals=[]}return a(t,[{key:"init",value:function(t){return this}},{key:"addPoint",value:function(t,e){return this.pieces.push(t.slice()),this.directionals.push(e.slice()),this}},{key:"toVector3",value:function(t){var e=o(t,3),i=e[0],n=e[1],r=e[2];return new h.Vector3(i,n,r)}},{key:"build",value:function(){for(var t=new h.Geometry,e=0;e<this.pieces.length;e++){var i=this.pieces[e],n=this.directionals[e];n=(0,u.scale)((0,u.normalize)(n),.25),t.vertices.push(this.toVector3((0,u.add)(i,(0,u.scale)(n,1)))),t.vertices.push(this.toVector3((0,u.add)(i,(0,u.scale)(n,-1))))}for(var r=0;2*r+3<t.vertices.length;r+=1){var o=this.getNormal(t.vertices[2*r+0],t.vertices[2*r+1],t.vertices[2*r+2]),a=this.getNormal(t.vertices[2*r+3],t.vertices[2*r+2],t.vertices[2*r+1]);console.log(o,a),t.faces.push(new h.Face3(2*r+0,2*r+1,2*r+2,o)),t.faces.push(new h.Face3(2*r+3,2*r+2,2*r+1,a))}return t}},{key:"getNormal",value:function(t,e,i){var n=(new h.Vector3).subVectors(e,t),r=(new h.Vector3).subVectors(i,t);return(new h.Vector3).crossVectors(n,r).normalize()}}]),t}();e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(2),s=function(){function t(e,i){n(this,t),this.center=[0,0,0],this.direction=(0,a.normalize)([1,1,0]),this.position=[0,0,0],this.width=1,this.vertices=[],this.faces=[],this.points=[],this.slopes=[]}return o(t,[{key:"computePoints",value:function(){var t=[],e=[],i=0,n=Math.PI/90,o=1,s=(0,a.scale)((0,a.normalize)([4,0,0]),o),h=r(s,3),u=h[0],c=h[1],l=h[2],f=0,p=0,d=0,v=this.direction.slice(),y=r(v,3),w=y[0],m=y[1],g=y[2],b=function(t){return[o*Math.cos(t),o*Math.sin(t)]};t.push([u,c,l]),e.push([w,m,g]);for(var M=1;M<230;M++){b(i),b(i+n);f=u,p=c,d=l,u+=w,c+=m,l+=g;var k=(0,a.scale)((0,a.normalize)([u,c,l]),o),_=r(k,3);u=_[0],c=_[1],l=_[2];var P=(0,a.scale)((0,a.normalize)([Math.random(),Math.random(),Math.random()]),.05),x=(0,a.sub)([u,c,l],[f,p,d]),E=r(x,3);w=E[0],m=E[1],g=E[2];var O=(0,a.scale)((0,a.normalize)((0,a.sub)([w,m,g],P)),.3),S=r(O,3);w=S[0],m=S[1],g=S[2],t.push([u,c,l]),e.push([w,m,g]),i+=n,o+=.015}this.points=t,this.slopes=e}},{key:"disturbVertices",value:function(){this.vertices.forEach(function(t){var e=.1;t[0]+=e*(Math.random()-.5),t[1]+=e*(Math.random()-.5),t[2]+=e*(Math.random()-.5),t[3]+=e*(Math.random()-.5)})}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return(0,u.scale)((0,u.normalize)(t),e)}function o(t){var e=h(t,3),i=e[0],n=e[1],r=e[2];return new THREE.Vector3(i,n,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.WindyGrass=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=i(2),c=(e.WindyGrass=function(){function t(e,i,r,o){n(this,t),this.up=[0,1,0],this.root=[e,i,r],this.updateWind(o||[1,0,0]),this.updateGeometry()}return a(t,[{key:"getTheta",value:function(){return 0}},{key:"updateWind",value:function(t){this.wind=t||[1,0,0]}},{key:"updateGeometry",value:function(){}}]),t}(),function(){function t(e,i,o,a){n(this,t),this.up=[0,1,0],this.root=[e,i,o],this.theta=a||0,this.segments=[],this.force=[0,0,0],this.NUM_SEGMENTS=20,this.LENGTH_SEGMENT=.5,this.HEIGHT_SEGMENT=.08+.02*Math.random(),this.WIDTH_SEGMENT=0;for(var s=this.theta,h=0;h<=this.NUM_SEGMENTS;h++){var c=s*h,l=[Math.cos(c),Math.sin(c)],f=l[0],p=l[1];this.segments.push({delta:r([0,f,p],this.HEIGHT_SEGMENT),normal:(0,u.normalize)([f,p,0])})}}return a(t,[{key:"updateTheta",value:function(t){}},{key:"getGeo",value:function(){for(var t=new THREE.Geometry,e=h(this.root,3),i=e[0],n=e[1],r=e[2],a=0;a<=this.NUM_SEGMENTS;a++){var s=h(this.segments[a].delta,3),u=s[0],c=s[1],l=s[2],f=(this.NUM_SEGMENTS-a+1)/this.NUM_SEGMENTS;t.vertices.push(o([i+.13*f,n,r])),t.vertices.push(o([i-.13*f,n,r])),i+=u,n+=c,r+=l}for(var p=0;p<this.NUM_SEGMENTS;p++){var d=o(this.segments[p].normal);t.faces.push(new THREE.Face3(2*p+0,2*p+1,2*p+2,d)),t.faces.push(new THREE.Face3(2*p+3,2*p+2,2*p+1,d))}return t}},{key:"updateWind",value:function(t,e,i){this.wind[0]=t,this.wind[1]=e,this.wind[2]=i}},{key:"updateGeometry",value:function(){}},{key:"getGeo2",value:function(){for(var t=new THREE.Geometry,e=h(this.root,3),i=e[0],n=e[1],a=e[2],c=h(this.up,3),l=c[0],f=c[1],p=c[2],d=0;d<this.NUM_SEGMENTS;d++){var v=this.segments[d].normal,y=(0,u.scale)((0,u.normalize)((0,u.cross)([l,f,p],v)),s*this.WIDTH_SEGMENT),w=(0,u.scale)((0,u.normalize)((0,u.cross)([l,f,p],v)),-s*this.WIDTH_SEGMENT);t.vertices.push(o((0,u.add)(y,[i,n,a]))),t.vertices.push(o((0,u.add)(w,[i,n,a])));var m=[i,n,a],g=(0,u.add)([i,n,a],r([l,f,p],this.HEIGHT_SEGMENT)),b=h(g,3);i=b[0],n=b[1],a=b[2],l=i-m[0],f=n-m[1],p=a-m[2]}for(var M=0;M<this.NUM_SEGMENTS-1;M++){var k=o(this.segments[0].normal);t.faces.push(new THREE.Face3(2*M+0,2*M+1,2*M+2,k)),t.faces.push(new THREE.Face3(2*M+3,2*M+2,2*M+1,k))}return t}}]),t}());e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Land=void 0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(12),s=n(a);e.Land=function(){function t(e){var i=e.height,n=e.width,o=e.floor;r(this,t),this.height=i,this.width=n,this.f=o,this.surface=new s.default(this.f,1,n,i)}return o(t,[{key:"position",value:function(t,e){return this.f(t,e)}},{key:"getMesh",value:function(){return this.surface.build()}}]),t}()},function(t,e,i){var n;!function(){"use strict";function r(t){var e;e="function"==typeof t?t:t?a(t):Math.random,this.p=o(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var i=0;i<512;i++)this.perm[i]=this.p[255&i],this.permMod12[i]=this.perm[i]%12}function o(t){var e,i=new Uint8Array(256);for(e=0;e<256;e++)i[e]=e;for(e=0;e<255;e++){var n=e+~~(t()*(256-e)),r=i[e];i[e]=i[n],i[n]=r}return i}function a(){var t=0,e=0,i=0,n=1,r=s();t=r(" "),e=r(" "),i=r(" ");for(var o=0;o<arguments.length;o++)t-=r(arguments[o]),t<0&&(t+=1),e-=r(arguments[o]),e<0&&(e+=1),i-=r(arguments[o]),i<0&&(i+=1);return r=null,function(){var r=2091639*t+2.3283064365386963e-10*n;return t=e,e=i,i=r-(n=0|r)}}function s(){var t=4022871197;return function(e){e=e.toString();for(var i=0;i<e.length;i++){t+=e.charCodeAt(i);var n=.02519603282416938*t;t=n>>>0,n-=t,n*=t,t=n>>>0,n-=t,t+=4294967296*n}return 2.3283064365386963e-10*(t>>>0)}}var h=.5*(Math.sqrt(3)-1),u=(3-Math.sqrt(3))/6,c=1/3,l=1/6,f=(Math.sqrt(5)-1)/4,p=(5-Math.sqrt(5))/20;r.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var i,n,r=this.permMod12,o=this.perm,a=this.grad3,s=0,c=0,l=0,f=(t+e)*h,p=Math.floor(t+f),d=Math.floor(e+f),v=(p+d)*u,y=p-v,w=d-v,m=t-y,g=e-w;m>g?(i=1,n=0):(i=0,n=1);var b=m-i+u,M=g-n+u,k=m-1+2*u,_=g-1+2*u,P=255&p,x=255&d,E=.5-m*m-g*g;if(E>=0){var O=3*r[P+o[x]];E*=E,s=E*E*(a[O]*m+a[O+1]*g)}var S=.5-b*b-M*M;if(S>=0){var j=3*r[P+i+o[x+n]];S*=S,c=S*S*(a[j]*b+a[j+1]*M)}var T=.5-k*k-_*_;if(T>=0){var A=3*r[P+1+o[x+1]];T*=T,l=T*T*(a[A]*k+a[A+1]*_)}return 70*(s+c+l)},noise3D:function(t,e,i){var n,r,o,a,s,h,u,f,p,d,v=this.permMod12,y=this.perm,w=this.grad3,m=(t+e+i)*c,g=Math.floor(t+m),b=Math.floor(e+m),M=Math.floor(i+m),k=(g+b+M)*l,_=g-k,P=b-k,x=M-k,E=t-_,O=e-P,S=i-x;E>=O?O>=S?(s=1,h=0,u=0,f=1,p=1,d=0):E>=S?(s=1,h=0,u=0,f=1,p=0,d=1):(s=0,h=0,u=1,f=1,p=0,d=1):O<S?(s=0,h=0,u=1,f=0,p=1,d=1):E<S?(s=0,h=1,u=0,f=0,p=1,d=1):(s=0,h=1,u=0,f=1,p=1,d=0);var j=E-s+l,T=O-h+l,A=S-u+l,L=E-f+2*l,C=O-p+2*l,z=S-d+2*l,R=E-1+3*l,G=O-1+3*l,I=S-1+3*l,H=255&g,F=255&b,V=255&M,B=.6-E*E-O*O-S*S;if(B<0)n=0;else{var D=3*v[H+y[F+y[V]]];B*=B,n=B*B*(w[D]*E+w[D+1]*O+w[D+2]*S)}var W=.6-j*j-T*T-A*A;if(W<0)r=0;else{var N=3*v[H+s+y[F+h+y[V+u]]];W*=W,r=W*W*(w[N]*j+w[N+1]*T+w[N+2]*A)}var q=.6-L*L-C*C-z*z;if(q<0)o=0;else{var U=3*v[H+f+y[F+p+y[V+d]]];q*=q,o=q*q*(w[U]*L+w[U+1]*C+w[U+2]*z)}var K=.6-R*R-G*G-I*I;if(K<0)a=0;else{var J=3*v[H+1+y[F+1+y[V+1]]];K*=K,a=K*K*(w[J]*R+w[J+1]*G+w[J+2]*I)}return 32*(n+r+o+a)},noise4D:function(t,e,i,n){var r,o,a,s,h,u=this.perm,c=this.grad4,l=(t+e+i+n)*f,d=Math.floor(t+l),v=Math.floor(e+l),y=Math.floor(i+l),w=Math.floor(n+l),m=(d+v+y+w)*p,g=d-m,b=v-m,M=y-m,k=w-m,_=t-g,P=e-b,x=i-M,E=n-k,O=0,S=0,j=0,T=0;_>P?O++:S++,_>x?O++:j++,_>E?O++:T++,P>x?S++:j++,P>E?S++:T++,x>E?j++:T++;var A,L,C,z,R,G,I,H,F,V,B,D;A=O>=3?1:0,L=S>=3?1:0,C=j>=3?1:0,z=T>=3?1:0,R=O>=2?1:0,G=S>=2?1:0,I=j>=2?1:0,H=T>=2?1:0,F=O>=1?1:0,V=S>=1?1:0,B=j>=1?1:0,D=T>=1?1:0;var W=_-A+p,N=P-L+p,q=x-C+p,U=E-z+p,K=_-R+2*p,J=P-G+2*p,Y=x-I+2*p,X=E-H+2*p,Z=_-F+3*p,Q=P-V+3*p,$=x-B+3*p,tt=E-D+3*p,et=_-1+4*p,it=P-1+4*p,nt=x-1+4*p,rt=E-1+4*p,ot=255&d,at=255&v,st=255&y,ht=255&w,ut=.6-_*_-P*P-x*x-E*E;if(ut<0)r=0;else{var ct=u[ot+u[at+u[st+u[ht]]]]%32*4;ut*=ut,r=ut*ut*(c[ct]*_+c[ct+1]*P+c[ct+2]*x+c[ct+3]*E)}var lt=.6-W*W-N*N-q*q-U*U;if(lt<0)o=0;else{var ft=u[ot+A+u[at+L+u[st+C+u[ht+z]]]]%32*4;lt*=lt,o=lt*lt*(c[ft]*W+c[ft+1]*N+c[ft+2]*q+c[ft+3]*U)}var pt=.6-K*K-J*J-Y*Y-X*X;if(pt<0)a=0;else{var dt=u[ot+R+u[at+G+u[st+I+u[ht+H]]]]%32*4;pt*=pt,a=pt*pt*(c[dt]*K+c[dt+1]*J+c[dt+2]*Y+c[dt+3]*X)}var vt=.6-Z*Z-Q*Q-$*$-tt*tt;if(vt<0)s=0;else{var yt=u[ot+F+u[at+V+u[st+B+u[ht+D]]]]%32*4;vt*=vt,s=vt*vt*(c[yt]*Z+c[yt+1]*Q+c[yt+2]*$+c[yt+3]*tt)}var wt=.6-et*et-it*it-nt*nt-rt*rt;if(wt<0)h=0;else{var mt=u[ot+1+u[at+1+u[st+1+u[ht+1]]]]%32*4;wt*=wt,h=wt*wt*(c[mt]*et+c[mt+1]*it+c[mt+2]*nt+c[mt+3]*rt)}return 27*(r+o+a+s+h)}},r._buildPermutationTable=o,n=function(){return r}.call(e,i,e,t),!(void 0!==n&&(t.exports=n)),e.SimplexNoise=r,t.exports=r}()},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(21),a=function(){function t(e,i){n(this,t),i=i||{},this.x=i.x||0,this.y=i.y||0,this.rad=e,this.dx=.865*this.rad,this.dy=this.rad/2}return r(t,[{key:"getCenter",value:function(t,e){var i=Math.floor(t/2),n=e*this.dx,r=(4*t-2*i)*this.dy;return t%2==0&&e%2==0?r+=this.dy:e%2==0&&(r-=this.dy),{x:n,y:r}}},{key:"getPoints",value:function(t,e){var i=Math.floor(t/2),n=e*this.dx,r=(4*t-2*i)*this.dy;return t%2==0&&e%2==0?r+=this.dy:e%2==0&&(r-=this.dy),{x:n,y:r}}},{key:"getBoundingBox",value:function(t,e){var i=Math.floor(t/2),n=e*this.dx,r=(4*t-2*i)*this.dy;return t%2==0&&e%2==0?r+=this.dy:e%2==0&&(r-=this.dy),{x:Math.round(n),y:Math.round(r)}}},{key:"get",value:function(t,e){var i=this.getCenter(t,e),n=(t+e)%2?Math.PI/2:-Math.PI/2;return new o.RegularTriangle(i.x,i.y,this.rad,n)}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(11),h=n(s),u=i(2),c=function(){function t(e,i,n,o){r(this,t),this.f=e,this.mesh=new h.default(i),this.width=n,this.height=o,this.radius=i}return a(t,[{key:"vector",value:function(t){return[t.x,this.f(t.x,t.y),t.y]}},{key:"build",value:function(){for(var t=0,e=this.f,i=new THREE.Geometry,n=Math.floor(this.width/this.radius),r=Math.floor(this.height/this.radius),a=-n/2;a<n/2;a++)for(var s=-r;s<r;s++){var h=this.mesh.get(a,s).getPointList(),c=o(h,3),l=(c[0],c[1],c[2],this.mesh.get(a,s).getPointList()),f=(0,u.sub)(this.vector(l[0]),this.vector(l[1])),p=(0,u.sub)(this.vector(l[1]),this.vector(l[2])),d=(0,u.cross)(f,p),v=new THREE.Vector3(d[0],d[1],d[2]);l.forEach(function(t){i.vertices.push(new THREE.Vector3(t.x,e(t.x,t.y),t.y))}),i.faces.push(new THREE.Face3(t+0,t+1,t+2,v)),t+=3}return i}}]),t}();e.default=c},function(t,e){"use strict";function i(t,e){var i=null;return function(){var n=this,r=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(n,r)},t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return(0,f.scale)((0,f.normalize)(t),e)}function a(t,e){e.forEach(function(e){t.push(e)})}function s(t,e){for(var i=c(e,3),n=i[0],r=i[1],o=i[2],a=0;a<t.length;a+=3)t[a+0]+=n,t[a+1]+=r,t[a+2]+=o}function h(t,e){if(t.length%3!=0)throw"whatever";for(var i=0;i<t.length;i+=3){var n=t[i+0],r=t[i+2];t[i+0]=n*Math.cos(e)+r*Math.sin(e),t[i+2]=-n*Math.sin(e)+r*Math.cos(e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.GrassyField=void 0;var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=i(8),f=(n(l),i(2)),p=i(4);e.GrassyField=function(){function t(e,i,n,o,h){function u(){var t=2*Math.random()-1;return t*w/2}r(this,t),this.width=e,this.height=i,this.density=n||1,this.variations=o||20,this.blades=[],this.floor=h||void 0,this.vertices=[],this.normals=[];for(var l=0;l<o;l++){var f=Math.PI/30*Math.random(),d=2*Math.PI*(Math.random()-.5);this.blades.push(this.blade(0,0,0,f,d))}var v=((0,p.getElapsedTime)(),90),y=91;v=Math.floor(this.width*Math.sqrt(this.density)),y=Math.floor(this.height*Math.sqrt(this.density));for(var w=this.width/v,m=this.height/y,g=0;g<v;g++)for(var b=0;b<y;b++){var M=Math.floor(this.blades.length*Math.random()),k=g*w-this.width/2+u(),_=b*m-this.width/2+u(),P=this.floor(k,_),x=c(this.blades[M],2),E=x[0],O=x[1];E=E.slice(),s(E,[k,P,_]),a(this.vertices,E),a(this.normals,O)}}return u(t,[{key:"blade",value:function(t,e,i,n,r){var o=this._blade(n),a=c(o,2),u=a[0],l=a[1];return h(u,r),s(u,[t,e,i]),h(l,r),[u,l]}},{key:"_blade",value:function(t){for(var e=0,i=0,n=0,r=10,s=.08+.03*Math.random(),h=.1,u=[],l=[],p=[],d=0;d<=r;d++){var v=t*d,y=[0,Math.cos(v),Math.sin(v)],w=y[0],m=y[1],g=y[2],b=(0,f.cross)([1,0,0],[w,m,g]),M=c(b,3),k=M[0],_=M[1],P=M[2];u.push({delta:o([w,m,g],s),normal:(0,f.normalize)([k,_,P])})}for(var x=0;x<=r;x++){var E=c(u[x].delta,3),O=E[0],S=E[1],j=E[2],T=(r-x+1)/r,k=[e+h*T,i,n],_=[e-h*T,i,n],P=[e+O+h*T,i+S,n+j],A=[e+O-h*T,i+S,n+j];a(l,_),a(l,k),a(l,P),a(l,_),a(l,P),a(l,A);var L=u[x].normal;a(p,L),a(p,L),a(p,L),a(p,L),a(p,L),a(p,L),e+=O,i+=S,n+=j}return[l,p]}},{key:"geometry",value:function(){this.geo=new THREE.BufferGeometry;var t=((0,p.getElapsedTime)(),Float32Array.from(this.vertices));this.geo.addAttribute("position",new THREE.BufferAttribute(t,3));var e=Float32Array.from(this.normals);return this.geo.addAttribute("normal",new THREE.BufferAttribute(e,3)),this.geo}},{key:"material",value:function(t){return this.params=t,new THREE.ShaderMaterial({vertexShader:i(70),fragmentShader:i(69),uniforms:{wind:{value:10}}})}}]),t}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e.FlatTriangleMesh=function(){function t(e,n,r,o){i(this,t),this.width=e,this.height=n,this.cols=r,this.rows=o,this.dx=r%2==1?this.width/(r+1):this.width/r,this.dy=this.height/o}return n(t,[{key:"get",value:function(t,e){var i=this.dx,n=this.dy,r=this.dx/2+e*this.dx/2,o=this.dy/2+t*this.dy;return(t+e)%2==0?[[r-i/2,o-n/2],[r+i/2,o-n/2],[r,o+n/2]]:[[r-i/2,o+n/2],[r+i/2,o+n/2],[r,o-n/2]]}}]),t}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e,i,n,r){var o=e+Math.floor((n-e)/2);i+Math.floor((r-i)/2);t.bezierCurveTo(o,i,o,r,n,r)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,n,r,o){i(this,t),this.bot=n,this.top=e,this.width=r,this.mid=o}return r(t,[{key:"drawDip",value:function(t,e){var i=this.mid,r=i,o=Math.floor(this.width/2);t.moveTo(r-o,this.top),n(t,r-o,this.top,r,this.bot),n(t,r,this.bot,r+o,this.top)}},{key:"drawShape",value:function(t,e){this.mid,Math.floor(this.width/2)}},{key:"draw",value:function(t,e){var i=this.mid,n=i,r=Math.floor(this.width/2);t.save(),t.beginPath(),this.drawDip(t,e),t.closePath(),t.fillStyle="black",t.strokeStyle="white",t.lineWidth="2.5",t.fill(),t.restore(),t.beginPath(),t.closePath(),t.save(),t.moveTo(0,this.top),t.lineTo(n-r,this.top),t.moveTo(n+r,this.top),t.lineTo(e,this.top),this.drawDip(t,e),t.strokeStyle="white",t.lineWidth="4.5",t.stroke(),t.restore()}}]),t}();e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(23),s=n(a),h=function(){function t(e,i,n,o,a,s){r(this,t),this.theta=s,this.x=e,this.y=i,this.dx=this.rad,this.dy=this.rad,this.dots=[],this.size=o,this.rad=n,this.col=a,this.dx=.865*this.rad,this.dy=this.rad/2,this.setup()}return o(t,[{key:"get",value:function(t,e){var i=Math.floor(t/2),n=e*this.dx,r=(4*t-2*i)*this.dy;return t%2==0&&e%2==0?r+=this.dy:e%2==0&&(r-=this.dy),{x:Math.round(n),y:Math.round(r)}}},{key:"setup",value:function(){var t=this.get(1,1),e=this.get(2,1),i=this.get(3,1),n=this.get(4,1),r=this.get(5,1),o=this.get(1,2),a=this.get(2,2),h=this.get(3,2),u=this.get(4,2),c=this.get(5,2),l=this.get(2,3),f=this.get(2,4);this.grid=[new s.default(t.x,t.y,this.rad,"black",-Math.PI/2),new s.default(e.x,e.y,this.rad,"cyan",Math.PI/2),new s.default(i.x,i.y,this.rad,"magenta",-Math.PI/2),new s.default(n.x,n.y,this.rad,"gray",Math.PI/2),new s.default(r.x,r.y,this.rad,"pink",-Math.PI/2),new s.default(o.x,o.y,this.rad,"black",Math.PI/2),new s.default(a.x,a.y,this.rad,"red",-Math.PI/2),new s.default(h.x,h.y,this.rad,"magenta",Math.PI/2),new s.default(u.x,u.y,this.rad,"red",-Math.PI/2),new s.default(c.x,c.y,this.rad,"pink",Math.PI/2),new s.default(l.x,l.y,this.rad,"yellow",Math.PI/2),new s.default(f.x,f.y,this.rad,"blue",-Math.PI/2)]}},{key:"draw",value:function(t){var e=this;t.save(),e.grid.forEach(function(e,i){e.draw(t)}),t.restore()}}]),t}();e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SphereSurface=e.SquareSurface=e.FunSurface=e.SquareGrid=void 0;var r=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(4),s=e.SquareGrid=function(){function t(e){var i=e.width,r=e.height;n(this,t),this.dx=i,this.dy=r}return o(t,[{key:"get",value:function(t,e){return[t*this.dx,e*this.dy]}},{key:"getBoxCenter",value:function(t,e){return[(t+.5)*this.dx,(e+.5)*this.dy]}},{key:"getBox",value:function(t,e){return[[t*this.dx,e*this.dy],[(t+1)*this.dx,(e+1)*this.dy]]}},{key:Symbol.iterator,value:function(){for(var t=[],e=0;e<10;e++)for(var i=0;i<10;i++)t.push([e,i,this.getBox(e,i)]);return t.values()}},{key:"getPointList",value:function(t,e){return[[(t+0)*this.dx,(e+0)*this.dy],[(t+1)*this.dx,(e+0)*this.dy],[(t+1)*this.dx,(e+1)*this.dy],[(t+0)*this.dx,(e+1)*this.dy]]}}]),t}();e.FunSurface=function(){function t(e,i,r,o){n(this,t)}return o(t,[{key:"build",value:function(){for(var t=new THREE.Geometry,e=10,i=0;i<e;i++){var n=(0,a.random)(-3,3),r=(0,a.random)(-3,3),o=(0,a.random)(-3,3);t.vertices.push(new THREE.Vector3(n,r,o))}for(var s=0;s<e;s++){var h=Math.floor(Math.random()*e),u=Math.floor(Math.random()*e),c=Math.floor(Math.random()*e);t.faces.push(new THREE.Face3(h,u,c))}return t}}]),t}(),e.SquareSurface=function(){function t(e,i,r,o){n(this,t),this.f=e,this.grid=new s({width:.08,height:.08})}return o(t,[{key:"build",value:function(){function t(t){var e=r(t,2),n=e[0],o=e[1],a=i.f(n,o);return new THREE.Vector3(n,a,o);
}function e(e,i){n.vertices.push(t(e),t(i))}for(var i=this,n=new THREE.Geometry,o=200,a=-o/2;a<=o/2;a++)for(var s=-o/2;s<=o/2;s++){var h=(n.vertices.length,this.grid.getPointList(a,s)),u=r(h,4),c=u[0],l=u[1],f=u[2],p=u[3];e(c,l),e(l,f),e(f,p),e(p,c)}return n}}]),t}(),e.SphereSurface=function(){function t(e,i){n(this,t),this.f=e,this.detail=i}return o(t,[{key:"build",value:function(){function t(t){var e=r(t,3),i=e[0],n=e[1],o=e[2];return new THREE.Vector3(i,n,o)}function e(e,i){n.vertices.push(t(e),t(i))}function i(t,e){return(0,a.cartesian)([o(t,e),t,e])}for(var n=new THREE.Geometry,o=(Math.PI/s,2*Math.PI/s,this.f),s=this.detail,h=0;h<s;h++)for(var u=0;u<s;u++)if(!((h+u)%2)){var c=(h+0)/s*Math.PI,l=(h+1)/s*Math.PI,f=(u+0)/s*2*Math.PI,p=(u+1)/s*2*Math.PI,d=i(c,f),v=i(l,f),y=i(l,p),w=i(c,p);e(d,v),e(y,w),e(v,y),e(w,d)}return n}}]),t}()},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(20),s=n(a),h=function(){function t(e,i,n,o){r(this,t),this.width=e.width,this.height=e.height,this.x=i,this.y=n,this.grid=null,this.col=o,this.setupGrid()}return o(t,[{key:"setupGrid",value:function(){var t=this;this.grid=new Array(this.x);for(var e=0;e<this.x;e++)this.grid[e]=new Array(this.y);for(var i=this.width/this.x,n=this.height/this.y,r=0;r<this.x;r++)for(var o=0;o<this.y;o++)t.grid[r][o]=new s.default(r*i,o*n,i,n,t.col)}},{key:"draw",value:function(t){this.grid.forEach(function(e,i){e.forEach(function(e,i){e.draw(t)})})}}]),t}();e.default=h},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){return Math.random()*(e-t)+t}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,n,r,o,a){i(this,t),this.x=e,this.y=n,this.w=r,this.h=o,this.col=a,this.image=new Image,this.image.src="img/wave-3.jpg",this.box=this.randomSlice(100,100)}return r(t,[{key:"randomSlice",value:function(t,e){var i=Math.floor(n(0,this.image.width-t)),r=Math.floor(n(0,this.image.height-e));return{sx:i,sy:r,sw:t,sh:e}}},{key:"draw",value:function(t){var e=this.box;t.save(),t.drawImage(this.image,e.sx,e.sy,e.sw,e.sh,this.x,this.y,this.w,this.h),t.globalCompositeOperation="lighten",t.fillStyle=this.col,t.rect(this.x,this.y,this.w,this.h),t.fill(),t.restore()}}]),t}();e.default=o},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e.RegularTriangle=function(){function t(e,n,r,o){i(this,t),this.x=e,this.y=n,this.size=r,this.theta=o||0}return n(t,[{key:"getCenter",value:function(){return{x:this.x,y:this.y}}},{key:"getPointList",value:function(){for(var t=this.theta,e=this.size,i=[],n=0;n<3;n++){var r=2*n*Math.PI/3,o=this.x+e*Math.cos(t+r),a=this.y+e*Math.sin(t+r);i.push({x:o,y:a})}return i}},{key:"getBoundingBox",value:function(){var t=this.getPointList(),e={min:+(1/0),max:-(1/0)},i={min:+(1/0),max:-(1/0)};return t.forEach(function(t){e.min=Math.min(e.min,t.x),e.max=Math.max(e.max,t.x),i.min=Math.min(i.min,t.y),i.max=Math.max(i.max,t.y)}),{x:e.min,y:i.min,w:e.max-e.min,h:i.max-i.min}}},{key:"getAlteredTriangle",value:function(e){return new t(this.x,this.y,e,this.theta)}}]),t}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){i(this,t),this.position=e.position,this.faceSize=e.faceSize,this.eyeSize=this.faceSize/9,this.eyeDistance=this.faceSize/3,this.eyeSpacing=this.faceSize/1.3}return n(t,[{key:"update",value:function(t){this.faceSize=t.faceSize,this.eyeSize=t.eyeSize||this.faceSize/9,this.eyeSpacing=t.eyeSpacing||this.faceSize/1.3,this.eyeDistance=t.eyeDistance||this.faceSize/3,this.mouthDistance=t.mouthDistance,this.mouthWidth=t.mouthWidth,this.mouthCrookedFactor=t.mouthCrookedFactor||0}},{key:"drawFace",value:function(t){t.save(),t.beginPath(),t.arc(this.position[0],this.position[1],this.faceSize,0,2*Math.PI),t.stroke(),t.restore()}},{key:"drawEyes",value:function(t){t.save();var e=this.position[0],i=this.position[1]-this.eyeDistance;t.beginPath(),t.arc(e-this.eyeSpacing/2,i,this.eyeSize,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.arc(e+this.eyeSpacing/2,i,this.eyeSize,0,2*Math.PI),t.fill(),t.closePath(),t.restore()}},{key:"drawMouth",value:function(t){t.save();var e=this.position[0]-this.mouthWidth/2,i=this.position[1]+this.mouthDistance,n=this.mouthCrookedFactor;t.beginPath(),t.moveTo(e,i),t.quadraticCurveTo(e+this.mouthWidth/2+n,i+10,e+this.mouthWidth,i+n),t.stroke(),t.restore()}},{key:"draw",value:function(t){this.drawFace(t),this.drawEyes(t),this.drawMouth(t)}}]),t}();e.default=r},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){i(this,t)}return n(t,[{key:"constuctor",value:function(t,e,i,n,r,o){this.x=t,this.y=e,this.rad=i,this.color=n,this.theta=r,this.up=o}}]),t}();e.default=r,r.prototype.draw=function(t){var e=this.up?-1:1,i=this.theta;t.save(),t.beginPath(),t.fillStyle=this.color,t.strokeStyle=this.color,t.lineWidth=.9,t.moveTo(Math.round(this.x+this.rad*Math.cos(i)),Math.round(this.y+this.rad*Math.sin(i)));for(var n=1;n<3;n++){var r=2*n*Math.PI/3,o=this.x+e*this.rad*Math.cos(r+i),a=this.y+e*this.rad*Math.sin(r+i);o=Math.round(o),a=Math.round(a),t.lineTo(o,a)}t.closePath(),t.stroke(),t.fill();.865*this.rad;t.restore()}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,n,r,o,a,s){i(this,t),this.x=e,this.y=n,this.rad=r,this.color=a,this.image=o,this.theta=s}return n(t,[{key:"getPointList",value:function(){for(var t=this.theta,e=[],i=0;i<3;i++){var n=2*i*Math.PI/3,r=this.x+this.rad*Math.cos(t+n),o=this.y+this.rad*Math.sin(t+n);r=Math.round(r),o=Math.round(o),e.push({x:r,y:o})}return e}},{key:"getBoundingBox",value:function(){var t=this.getPointList(),e={min:+(1/0),max:-(1/0)},i={min:+(1/0),max:-(1/0)};return t.forEach(function(t){e.min=Math.min(e.min,t.x),e.max=Math.max(e.max,t.x),i.min=Math.min(i.min,t.y),i.max=Math.max(i.max,t.y)}),{x:e.min,y:i.min,w:e.max-e.min,h:i.max-i.min}}},{key:"getRandomImageSlice",value:function(t,e){return{sx:Math.floor((this.image.width-t)*Math.random()),sy:Math.floor((this.image.height-e)*Math.random()),sw:t,sh:e}}},{key:"draw",value:function(t){this.up?-1:1,this.theta;t.save(),t.fillStyle=this.color,t.strokeStyle=this.color,t.lineWidth=.9,t.beginPath();var e=this.getPointList();t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[2].x,e[2].y),t.closePath();var i=2*this.rad,n=this.getRandomImageSlice(i,i),r=this.getBoundingBox();t.clip(),t.fillStyle="red",t.strokeStyle="black",t.drawImage(this.image,n.sx,n.sy,n.sw,n.sh,r.x,r.y,r.w,r.h),t.restore()}}]),t}();e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(24),s=n(a),h=function(){function t(e,i,n,o){r(this,t),this.x=e,this.y=i,this.dx=this.rad,this.dy=this.rad,this.dots=[],this.rad=n,this.image=o,this.dx=.865*this.rad,this.dy=this.rad/2,this.setup()}return o(t,[{key:"get",value:function(t,e){var i=Math.floor(t/2),n=e*this.dx,r=(4*t-2*i)*this.dy;return t%2==0&&e%2==0?r+=this.dy:e%2==0&&(r-=this.dy),{x:Math.round(n),y:Math.round(r)}}},{key:"setup",value:function(){var t=this.image;this.grid=[];for(var e=0;e<20;e++)for(var i=0;i<20;i++){var n=(e+i)%2?1:-1,r=n*Math.PI/2,o=this.get(e,i);this.grid.push(new s.default(o.x,o.y,this.rad,t,"black",r))}}},{key:"draw",value:function(t){var e=this;t.save(),e.grid.forEach(function(e,i){e.draw(t)}),t.restore()}}]),t}();e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=i(17),l=n(c),f=i(56),p=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i}return a(e,t),s(e,[{key:"setup",value:function(){this.el=document.getElementById(this.id),this.width=this.el.width,this.height=this.el.height,this.ctx=this.el.getContext("2d"),this.grid=new l.default(4,4,60,60,"red"),this.setupDots()}},{key:"setupDots",value:function(){var t=(Math.floor(this.width*Math.random()),Math.floor(this.width*Math.random()),Math.floor(255*Math.random())),e=Math.floor(255*Math.random()),i=Math.floor(255*Math.random()),n=1;(0,f.rgba)(t,e,i,n)}},{key:"update",value:function(){}},{key:"clear",value:function(){var t=this.ctx;t.fillStyle="white",t.fillRect(0,0,this.width,this.height)}},{key:"draw",value:function(){var t=this.ctx;this.clear(),t.save(),t.globalCompositeOperation="darken",this.grid.draw(t),t.restore()}}]),e}(u.default);e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=function(){function t(e,i,n,r){a(this,t),this.x=e,this.y=i,this.rad=n,this.col=r}return s(t,[{key:"draw",value:function(t){t.beginPath(),t.fillStyle=this.col,t.lineWidth="1",t.arc(this.x,this.y,this.rad,0,2*Math.PI),t.fill()}}]),t}(),l=function(){function t(e,i,n,r,o,s){a(this,t),this.theta=s,this.x=e,this.y=i,this.dx=this.rad,this.dy=this.rad,this.dots=[],this.size=r,this.rad=n,this.col=o,this.setup()}return s(t,[{key:"setup",value:function(){var t=this,e=2*this.size+1,i=2*this.size+1;t.dots=new Array(i);for(var n=0;n<t.dots.length;n++)t.dots[n]=new Array(e);for(var n=([this.x,this.y],0);n<t.dots.length;n++)for(var r=t.dots[n],o=0;o<r.length;o++){var a=n-this.size,s=o-this.size,h=2*this.rad+10;o%2==1&&(a+=.5);var u=a*h,l=s*h,f=this.theta;u=u*Math.cos(f)-l*Math.sin(f),l=u*Math.sin(f)+l*Math.cos(f),u+=this.x,l+=this.y,t.dots[n][o]=new c(u,l,t.rad,this.col)}}},{key:"draw",value:function(t){var e=this;t.save(),e.dots.forEach(function(e,i){e.forEach(function(e,i){e.draw(t)})}),t.restore()}}]),t}(),f=function(t){function e(t){a(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i}return o(e,t),s(e,[{key:"setup",value:function(){this.el=document.getElementById(this.id),this.width=this.el.width,this.height=this.el.height,this.ctx=this.el.getContext("2d"),this.setupDots()}},{key:"setupDots",value:function(){var t=Math.floor(this.width*Math.random()),e=Math.floor(this.width*Math.random()),i=Math.floor(15+30*Math.random()),n=Math.random()*Math.PI/20-Math.PI/20;this.grid1=new l(t,e,i,29,"rgba(255, 0, 0, 1)",0),this.grid2=new l(t,e,i,29,"rgba(0, 200, 255, 1)",n)}},{key:"update",value:function(t){}},{key:"clear",value:function(){var t=this.ctx;t.fillStyle="white",t.fillRect(0,0,this.width,this.height)}},{key:"draw",value:function(){var t=this.ctx;this.clear(),t.save(),t.globalCompositeOperation="darken",this.grid1.draw(t),this.grid2.draw(t),t.restore()}}]),e}(u.default);e.default=f},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Couch=void 0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(1),c=r(u),l=i(3),f=n(l),p=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.app={},i}return s(e,t),h(e,[{key:"init",value:function(){var t=this;console.log("!?!?",1),t.ambientColor=[207,207,207],t.pointColor=[102,102,102];var e=this.el.parentElement.offsetWidth,i=this.el.parentElement.offsetHeight;t.app.width=e,t.app.height=i,t.app.view_angle=15,t.app.aspect=e/i,t.app.near=.1,t.app.far=1e4,t.app.iterations=0,t.app.time=0,t.params={y:0,speed:30},t.scene=new f.Scene,t.renderer=new f.WebGLRenderer({antialias:!0,canvas:this.el}),this.renderer||(this.renderer=new f.CanvasRenderer),t.camera={},t.camera.persp=new f.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),console.log(this.app.view_angle,this.app.aspect,this.app.near,this.app.far);var n=new f.LoadingManager;n.onProgress=function(){};new f.OBJLoader(n);this.renderer.setSize(this.app.width,this.app.height),this.couches=new Array,this.pointLight1=new f.PointLight(4482662),this.pointLight2=new f.PointLight(6702148),this.ambientLight=new f.AmbientLight(10066329),this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight);var r=(this.scene,1800);setInterval(function(){t.addCouch()},r),setTimeout(function(){setInterval(function(){t.removeCouch()},r)},13e3),this.renderer.setClearColor(new f.Color(16777215))}},{key:"update",value:function(){this.app.time+=5e-5,this.camera.persp.position.set(0,15,0),this.camera.persp.up=new f.Vector3(0,1,0),this.camera.persp.lookAt(new f.Vector3(0,0,0)),this.pointLight1.position.set(-20,25,0),this.pointLight1.lookAt(new f.Vector3(0,0,0)),this.pointLight2.position.set(20,25,0),this.pointLight2.lookAt(new f.Vector3(0,0,0));for(var t=0;t<this.couches.length;t++)this.couches[t].update()}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera.persp)}},{key:"addCouch",value:function(){var t=this,e=new d;e.loaded(function(){if(e.obj){t.couches.push(e);t.scene.add(t.couches[t.couches.length-1].obj)}})}},{key:"removeCouch",value:function(){var t=this,e=t.couches.shift();t.scene.remove(e.obj)}}]),e}(c.default);e.default=p;var d=e.Couch=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=i;n.obj_file="obj/Couch.obj",n.obj=void 0,n.is_loaded=!1;var r=8,s=8*(2*Math.random()-1),h=2*Math.random()-1,u=1*Math.random()-.5,c=1*Math.random()-.5,l=1*Math.random()-.5;return n.position={x:r,y:s,z:h},n.velocity={x:-12,y:0,z:0},n.acceleration={x:0,y:0,z:0},n.rotation={x:0,y:0,z:0},n.rotation_vel={x:u,y:c,z:l},n.time_step=.005*Math.random()+.005,n.color=[0,0,0],n.init(),n.success=void 0,n.failure=void 0,n.finished_loading=function(){"function"==typeof n.success&&n.success.apply(n),n.is_loaded=!0},setTimeout(function(){n.load(n.obj_file)},1e3),i}return s(e,t),h(e,[{key:"init",value:function(){this.manager=new f.LoadingManager,this.manager.onProgress=function(){},this.loader=new f.OBJLoader(this.manager)}}]),h(e,[{key:"load",value:function(t){var e=this;this.loader.load(e.obj_file,function(t){e.obj=t,e.obj.position.x=e.position.x,e.obj.position.y=e.position.y,e.obj.position.z=e.position.z,e.finished_loading()})}},{key:"update",value:function(){var t=this,e=t.time_step;t.velocity.x+=e*t.acceleration.x,t.velocity.y+=e*t.acceleration.y,t.velocity.z+=e*t.acceleration.z,t.position.x+=e*t.velocity.x,t.position.y+=e*t.velocity.y,t.position.z+=e*t.velocity.z,t.rotation.x+=e*t.rotation_vel.x,t.rotation.y+=e*t.rotation_vel.y,t.rotation.z+=e*t.rotation_vel.z,t.obj.position.set(this.position.x,this.position.y,this.position.z),t.obj.rotation.x=t.rotation.x,t.obj.rotation.y=t.rotation.y,t.obj.rotation.z=t.rotation.z}},{key:"loaded",value:function(t){this.success=t}}]),e}(c.default)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=(i(3),function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"setup",value:function(t){}},{key:"update",value:function(t){}},{key:"draw",value:function(){}}]),e}(u.default));e.default=c},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=i(1),l=(r(c),i(5)),f=r(l),p=i(2),d=i(62),v=i(3),y=n(v),w=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.app={},i.width=i.el.offsetWidth,i.height=i.el.offsetHeight,i}return s(e,t),u(e,[{key:"setup",value:function(){this.app.width=this.width,this.app.height=this.height,this.app.view_angle=15,this.app.aspect=this.width/this.height,this.app.near=.1,this.app.far=1e4,this.app.iterations=0,this.app.time=0,this.renderer=new y.WebGLRenderer({antialias:!0,canvas:this.el}),this.scene=new y.Scene,this.camera=new y.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.pointLight1=new y.PointLight(4482662),this.pointLight2=new y.PointLight(6702148),this.ambientLight=new y.AmbientLight(12303291),this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(new y.Color(16772863)),this.loadObj(),this.app.time=0;for(var t=new y.MeshPhongMaterial({color:15663103}),e=0;e<5;e++)for(var i=0;i<10;i++){var n=2*(e-2),r=0,o=-3*i-1,a=new y.BoxGeometry(1.5,2+i,2),s=new y.Mesh(a,t);s.position.set(n,r,o),this.scene.add(s)}this.sequencer=new d.CameraSequence,this.sequencer.add(new d.LinearCameraTrack([0,0,40],[0,0,20]),1),this.sequencer.add(new d.LinearCameraTrack([0,0,20],[0,0,40]),1),this.cameraTrack=this.quentin(this.camera.position,(0,p.scale)(this.camera.position,.75)),this.camera.position.set(0,0,40);var h=[this.camera.position.x,this.camera.position.y,this.camera.position.z],u=this.getPlane(this.camera.fov,h,[0,0,0]);this.backwall=this.getPlaneWidth(this.camera.fov,h,[0,0,0]),this.view_angle=this.getFov(this.backwall,h,[0,0,0]),this.scene.add(this.getDot(u[0])),this.scene.add(this.getDot(u[1])),this.scene.add(this.getDot(u[2])),this.scene.add(this.getDot(u[3]))}},{key:"loadObj",value:function(){this.obj_file="obj/skull.obj";var t=new y.LoadingManager;t.onProgress=function(){};var e=new y.OBJLoader(t);e.load(this.obj_file,function(t){t.position.x=0,t.position.y=-1.5,t.position.z=0,this.scene.add(t),console.log("Added")}.bind(this))}},{key:"getDot",value:function(t,e){var i=h(t,3),n=i[0],r=i[1],o=i[2];e=e||0;var a=new y.Geometry;a.vertices.push(new y.Vector3(n,r,o));var s=new y.PointsMaterial({size:3,sizeAttenuation:!1,color:e});return new y.Points(a,s)}},{key:"update",value:function(){this.app.time+=.01;var t=this.app.time/3%2,e=0,i=0,n=40,r=this.sequencer.at(t),o=h(r.position,3);e=o[0],i=o[1],n=o[2],this.camera.position.set(e,i,n),this.camera.lookAt(new y.Vector3(0,0,0)),this.pointLight1.position.set(-20,25,0),this.pointLight1.lookAt(new y.Vector2(0,0,0)),this.pointLight2.position.set(20,25,0),this.pointLight2.lookAt(new y.Vector3(0,0,0))}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(f.default);e.default=w},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=i(1),l=(r(c),i(5)),f=r(l),p=i(2),d=i(3),v=n(d),y=i(7),w=r(y),m=i(6),g=r(m),b=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.app={},i.width=i.el.offsetWidth,i.height=i.el.offsetHeight,i}return s(e,t),u(e,[{key:"setup",value:function(){this.app.width=this.width,this.app.height=this.height,this.app.view_angle=15,this.app.aspect=this.width/this.height,this.app.near=.1,this.app.far=1e4,this.app.iterations=0,this.app.time=0,this.renderer=new v.WebGLRenderer({antialias:!0,canvas:this.el}),this.scene=new v.Scene,this.camera=new v.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.pointLight1=new v.PointLight(2241331,2,800),this.pointLight2=new v.PointLight(3351074,2,800),this.ambientLight=new v.AmbientLight(12303291),this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(new v.Color(16772863)),this.app.time=0;var t=new v.MeshPhongMaterial({color:2200782,emissive:0,specular:1118481,reflectivity:.2,shininess:30,shading:v.SmoothShading,side:v.DoubleSide}),e=this.buildRibbon();this.scene.add(new v.Mesh(e,t)),this.cameraTrack=this.quentin(this.camera.position,(0,p.scale)(this.camera.position,.75)),this.camera.position.set(0,0,40);var i=[this.camera.position.x,this.camera.position.y,this.camera.position.z];this.getPlane(this.camera.fov,i,[0,0,0]);this.backwall=this.getPlaneWidth(this.camera.fov,i,[0,0,0]),this.view_angle=this.getFov(this.backwall,i,[0,0,0])}},{key:"buildRibbon",value:function(){var t=new w.default;t.computePoints();var e=new g.default;return t.points.forEach(function(i,n){var r=h(t.points[n],3),o=r[0],a=r[1],s=r[2],u=h(t.slopes[n],3),c=(u[0],u[1],u[2],(0,p.sub)((0,p.normalize)([o,a,s]),(0,p.normalize)(t.center))),l=(0,p.normalize)(t.slopes[n]),f=(0,p.cross)(l,c),d=(0,p.add)([o,a,s],(0,p.scale)(f,.1)),v=h(d,3),y=(v[0],v[1],v[2],(0,p.add)([o,a,s],(0,p.scale)(f,-.1))),w=h(y,3);w[0],w[1],w[2];e.addPoint([o,a,s],f)}),e.build()}},{key:"loadObj",value:function(){this.obj_file="obj/trees/AS12_6.obj";var t=new v.LoadingManager;t.onProgress=function(){};var e=new v.OBJLoader(t);e.load(this.obj_file,function(t){t.position.x=0,t.position.y=-1.5,t.position.z=0,this.scene.add(t),console.log("Added")}.bind(this))}},{key:"getDot",value:function(t,e){var i=h(t,3),n=i[0],r=i[1],o=i[2];e=e||0;var a=new v.Geometry;a.vertices.push(new v.Vector3(n,r,o));var s=new v.PointsMaterial({size:3,sizeAttenuation:!1,color:e});return new v.Points(a,s)}},{key:"update",value:function(){this.app.time+=.01;var t=this.app.time/3%1,e=0,i=0,n=40,r=[0,0,40],o=[0,0,1.5],a=(0,p.add)((0,p.scale)(r,1-t),(0,p.scale)(o,t)),s=h(a,3);e=s[0],i=s[1],n=s[2],this.camera.position.set(e,i,n),this.camera.lookAt(new v.Vector3(0,0,0)),this.camera.fov=this.getFov(this.backwall,[e,i,n],[0,0,0]),this.camera.updateProjectionMatrix(),this.pointLight1.position.set(e-10,i,n),this.pointLight1.lookAt(new v.Vector3(0,0,0)),this.pointLight2.position.set(e+10,i,n),this.pointLight2.lookAt(new v.Vector3(0,0,0))}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(f.default);e.default=b},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){return(e-t)*Math.random()+t}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(1),c=n(u),l=i(16),f=n(l),p=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.width=i.el.width,i.height=i.el.height,i.ctx=i.el.getContext("2d"),i.lines=[],i}return a(e,t),h(e,[{key:"setup",value:function(){for(var t=0;t<5;t++)this.lines.unshift(new f.default(300+40*t,500+80*t+20*Math.random(),70+40*t+s(-30,80),450+s(-100,100)))}},{key:"update",value:function(t){}},{key:"clear",value:function(){var t=this.ctx;t.fillStyle="black",t.fillRect(0,0,this.width,this.height)}},{key:"draw",value:function(){this.clear();var t=this.ctx,e=this.width;t.imageSmoothingEnabled=!0,this.lines.forEach(function(i){i.draw(t,e)})}}]),e}(c.default);e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=(i(15),i(11)),l=n(c),f=i(4),p=function(t){function e(t){r(this,e);var i=(Math.sqrt(3)/2,o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)));i.el=t.el,i.ctx=i.el.getContext("2d"),i.width=t.el.width,i.height=t.el.height,i.backgroundImage=new Image,i.backgroundImage.onload=function(){i.setup()},i.backgroundImage.src=t.backgroundImage,i.mesh=new l.default(100,{x:0,y:0});i.sunGrid=[];for(var n=0;n<20;n++)for(var a=0;a<20;a++)i.sunGrid.push(i.getRandomImagePiece(i.backgroundImage,200,200));return i}return a(e,t),s(e,[{key:"setup",value:function(t){console.log(":D"),console.log(this.backgroundImage)}},{key:"clear",value:function(){var t=this.ctx;t.fillStyle="black",t.fillRect(0,0,this.width,this.height)}},{key:"update",value:function(t){}},{key:"draw",value:function(t){var e=this;this.clear(),this.sunGrid.forEach(function(t,i){var n=i%20,r=Math.floor(i/20);e.ctx.drawImage(e.backgroundImage,t[0].x,t[0].y,200,200,100*n,100*r,100,100)})}},{key:"getRandomImagePiece",value:function(t,e,i){var n=(0,f.random)(0,t.width-e),r=(0,f.random)(0,t.height-i);return[{x:n,y:r},{x:n+e,y:r},{x:n+e,y:r+i},{x:n,y:r+i}]}},{key:"drawTriangle",value:function(t,e,i){var n=this.mesh.get(t,e).getPointList(),r=this.ctx;r.save(),r.beginPath(),r.fillStyle=i,r.moveTo(n[0].x,n[0].y),r.lineTo(n[1].x,n[1].y),r.lineTo(n[2].x,n[2].y),r.fill(),r.fill(),r.fill(),r.fill(),r.closePath(),r.restore()}}]),e}(u.default);e.default=p},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(3),h=n(s),u=i(4),c=i(13),l=(function(){function t(e,i){r(this,t),this.pos=e.slice(),this.vel=i?i.slice():[0,0,0],this.weight=1}return a(t,[{key:"tick",value:function(t){this.pos[0]+=t*this.vel[0],this.pos[1]+=t*this.vel[1],this.pos[2]+=t*this.vel[2]}}]),t}(),function(){function t(e){r(this,t),this.particles=[]}return a(t,[{key:"_add_random_particles",value:function(t){for(var e=2*Math.PI,i=0;i<t;i++)this.particles.push([(0,u.random)(-e,+e),(0,u.random)(-e,+e),(0,u.random)(-e,+e)])}}]),t}()),f=function(){function t(e){r(this,t),this.id=e.id,this.el=document.getElementById(this.id),this.width=this.el.offsetWidth,this.height=this.el.offsetHeight}return a(t,[{key:"setup",value:function(){this.app={width:this.width,height:this.height,view_angle:15,aspect:this.width/this.height,near:.1,far:2e3},this.setupCamera(),this.scene=new h.Scene,this.renderer=new h.WebGLRenderer({antialias:!0,canvas:this.el}),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(1.5),this.renderer.setClearColor(16777215),this.addParticles()}},{key:"setupCamera",value:function(){this.camera=new h.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far)}},{key:"_getParticleMesh",value:function(t){var e=new h.DodecahedronGeometry(t);return new h.EdgesGeometry(e)}},{key:"eventHandlers",value:function(){var t=this,e=this,i={x:0,y:0};return{resize:(0,c.debounce)(100,function(t){e.resize(window.innerWidth,window.innerHeight)}),move:(0,c.debounce)(10,function(e){i.x=e.clientX,i.y=e.clientY;var n=new h.Vector3(.5,-2*(2*i.y/window.innerHeight-1),-2*(2*i.x/window.innerWidth-1));n.multiplyScalar(88),t.camera.position.copy(n)})}}},{key:"addParticles",value:function(){var t=this,e=new h.Group,i=.3;this.particles=new l,this.particles._add_random_particles(100);var n=new h.LineBasicMaterial({color:0});this.particles.particles.forEach(function(r){var a=o(r,3),s=a[0],c=a[1],l=a[2],f=new h.LineSegments(t._getParticleMesh(i),n);f.position.set(s,c,l),f.rotation.set((0,u.random)(0,2*Math.PI),(0,u.random)(0,2*Math.PI),(0,u.random)(0,2*Math.PI)),e.add(f)}),this.scene.add(e)}},{key:"update",value:function(t){this.camera.lookAt(0,0,0)}},{key:"resize",value:function(t,e){this.app.width=t,this.app.height=e,this.app.aspect=t/e,this.setupCamera(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.app.width,this.app.height)}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),t}();e.default=f},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(1),c=(r(u),i(5)),l=r(c),f=i(2),p=i(3),d=n(p),v=i(7),y=(r(v),i(6)),w=(r(y),i(12)),m=r(w),g=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.app={},i.width=i.el.offsetWidth,i.height=i.el.offsetHeight,i}return s(e,t),h(e,[{key:"setup",value:function(){this.app.width=this.width,this.app.height=this.height,this.app.view_angle=15,this.app.aspect=this.width/this.height,this.app.near=.1,this.app.far=1e4,this.app.iterations=0,this.app.time=0,this.renderer=new d.WebGLRenderer({antialias:!0,canvas:this.el}),this.scene=new d.Scene,this.camera=new d.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.pointLight1=new d.PointLight(2241331,2,800),this.pointLight2=new d.PointLight(3351074,2,800),this.ambientLight=new d.AmbientLight(12303291),this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(new d.Color(16772863)),this.app.time=0;var t=new d.MeshPhongMaterial({color:2236962,emissive:0,specular:2236962,reflectivity:.2,shininess:20,shading:d.SmoothShading,side:d.DoubleSide});this.cameraTrack=this.quentin(this.camera.position,(0,f.scale)(this.camera.position,.75)),this.camera.position.set(0,0,40);var e=[this.camera.position.x,this.camera.position.y,this.camera.position.z];this.getPlane(this.camera.fov,e,[0,0,0]);this.backwall=this.getPlaneWidth(this.camera.fov,e,[0,0,0]),this.view_angle=this.getFov(this.backwall,e,[0,0,0]),this.surface=new m.default(function(t,e){Math.sin(t),Math.cos(e);return Math.cos(1.2*Math.sqrt(t*t+e*e))+.5*Math.sin(t)},.15),this.scene.add(new d.Mesh(this.surface.build(),t))}},{key:"update",value:function(){this.app.time+=.01;var t=(this.app.time/3%1,0),e=10,i=10;this.camera.position.set(t,e,i),this.camera.lookAt(new d.Vector3(0,0,0)),this.camera.fov=this.getFov(this.backwall,[t,e,i],[0,0,0]),this.camera.updateProjectionMatrix(),this.pointLight1.position.set(t-10,e,i),this.pointLight1.lookAt(new d.Vector3(0,0,0)),this.pointLight2.position.set(t+10,e,i),this.pointLight2.lookAt(new d.Vector3(0,0,0))}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(l.default);e.default=g},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.GoldGridApp=e.FlatApp=void 0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(1),c=r(u),l=i(15),f=i(3),p=n(f);e.FlatApp=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.el=t.el,i.width=i.el.width,i.height=i.el.height,i.mesh=new l.FlatTriangleMesh(i.width,i.height,11,10),i.ctx=i.el.getContext("2d"),i}return s(e,t),h(e,[{key:"update",value:function(t){}},{key:"drawTriangle",value:function(t,e){var i=this.ctx;i.save(),i.beginPath(),i.fillStyle=e,i.moveTo(t[0][0],t[0][1]),i.lineTo(t[1][0],t[1][1]),i.lineTo(t[2][0],t[2][1]),i.fill(),i.fill(),i.fill(),i.fill(),i.closePath(),i.restore()}},{key:"draw",value:function(){this.drawTriangle(this.mesh.get(0,0),"black"),this.drawTriangle(this.mesh.get(0,1),"magenta"),this.drawTriangle(this.mesh.get(0,2),"cyan"),this.drawTriangle(this.mesh.get(1,0),"yellow"),this.drawTriangle(this.mesh.get(1,1),"black"),this.drawTriangle(this.mesh.get(1,2),"gray"),this.drawTriangle(this.mesh.get(0,22),"gray"),this.drawTriangle(this.mesh.get(1,22),"gray"),this.drawTriangle(this.mesh.get(2,22),"gray"),this.drawTriangle(this.mesh.get(9,0),"gray"),this.drawTriangle(this.mesh.get(9,1),"black"),this.drawTriangle(this.mesh.get(9,2),"gray"),this.drawTriangle(this.mesh.get(10,2),"gray")}}]),e}(c.default),e.GoldGridApp=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.el=t.el;var n=Math.sqrt(3)/2;return i.geometry=null,i.triMesh=new l.FlatTriangleMesh(11,11*n,4,4),i.setup(),i}return s(e,t),h(e,[{key:"asVectors",value:function(t){var e=[];return t.forEach(function(t){e.push(new p.Vector2(t[0],t[1]))}),e}},{key:"buildGeometry",value:function(){for(var t=new p.Geometry,e=-this.triMesh.rows;e<=this.triMesh.rows;e++)for(var i=-2*this.triMesh.cols;i<=2*this.triMesh.cols;i++){var n=this.asVectors(this.triMesh.get(e,i));n.forEach(function(e){var i=.9*e.x,n=.1*e.y,r=.1*Math.sin(i+n),o=new p.Vector3(e.x,e.y,r);t.vertices.push(o)});var r=t.vertices.length-3,o=void 0;o=(e+i)%2==0?new p.Face3(r+0,r+1,r+2):new p.Face3(r+2,r+1,r+0),t.faces.push(o)}return t}},{key:"setup",value:function(){this.camera=new p.PerspectiveCamera(75,1,.1,1e3),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=10,this.camera.lookAt(new p.Vector3(0,0,0)),this.scene=new p.Scene;var t=(new p.CubeTextureLoader).setPath("img/").load(["lenna.png","lenna.png","lenna.png","lenna.png","lenna.png","lenna.png"]);(new p.CubeTextureLoader).setPath("img/").load(["oil-2.png","oil-2.png","oil-2.png","oil-2.png","oil-2.png","oil-2.png"]);this.geometry=this.buildGeometry(),this.geometry.computeFaceNormals(),this.material=new p.MeshBasicMaterial({color:16777215,reflectivity:.8,envMap:t}),this.mesh=new p.Mesh(this.geometry,this.material),this.renderer=new p.WebGLRenderer({canvas:this.el}),this.renderer.setClearColor(65535,1),this.scene.add(this.mesh)}},{key:"update",value:function(t){}},{key:"draw",value:function(t){this.renderer.clear(),this.renderer.render(this.scene,this.camera)}}]),e}(c.default)},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function h(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=i(1),l=(r(c),i(5)),f=r(l),p=(i(2),i(3)),d=n(p),v=i(7),y=(r(v),i(6)),w=(r(y),i(8)),m=r(w),g=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.app={},i.width=i.el.offsetWidth,i.height=i.el.offsetHeight,i}return s(e,t),u(e,[{key:"setup",value:function(){this.app.width=this.width,this.app.height=this.height,this.app.view_angle=15,this.app.aspect=this.width/this.height,this.app.near=.1,this.app.far=1e4,this.app.iterations=0,this.app.time=0,this.renderer=new d.WebGLRenderer({antialias:!0,canvas:this.el}),this.scene=new d.Scene,this.camera=new d.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.pointLight1=new d.PointLight(14540253,2,800),this.pointLight2=new d.PointLight(14540253,2,800),this.ambientLight=new d.AmbientLight(12303291),this.pointLight1.position.set(-10,10,0),this.pointLight2.position.set(-10,10,0),this.pointLight1.lookAt(new d.Vector3(0,0,0)),this.pointLight2.lookAt(new d.Vector3(0,0,0)),this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(14540253),this.app.time=0,this.setupTrack(),this.addFloor(),this.addGrass(0,0,0);for(var t=0;t<800;t++){var e=4*Math.random()-1,i=4*Math.random()-1;this.addGrass(e,0,i,.05*Math.random())}this.force=new d.Vector3(0,0,1),this.dest=this.force.clone(),this.dest.multiplyScalar(-1),this.addForceArrow(),this.updateForce(2)}},{key:"setupTrack",value:function(){this.camera.position.set(0,10,40),this.camera.lookAt(new d.Vector3(0,0,4))}},{key:"addForceArrow",value:function(){this.forceArrow=new d.ArrowHelper(this.force,this.dest,h(this.force),0),this.scene.add(this.forceArrow),this.updateForceArrow()}},{key:"updateForceArrow",value:function(){this.dest=this.force.clone(),this.dest.multiplyScalar(-1),this.forceArrow.setLength(h(this.force)),this.forceArrow.position.x=this.force.x,this.forceArrow.position.y=this.force.y,this.forceArrow.position.z=this.force.z,this.forceArrow.position.multiplyScalar(-1)}},{key:"addGrass",value:function(t,e,i,n){var r=new d.MeshPhongMaterial({color:278528,emissive:0,specular:13421772,reflectivity:.2,shininess:30,shading:d.SmoothShading,side:d.DoubleSide});r=new d.MeshNormalMaterial({side:d.DoubleSide}),this.field=[];var o=new m.default(t,e,i,n),a=o.getGeo();this.scene.add(new d.Mesh(a,r))}},{key:"addFloor",value:function(){for(var t=new d.LineBasicMaterial({color:12040122}),e=100,i=-e;i<=e;i++){var n=new d.Geometry;n.vertices.push(new d.Vector3(i,0,-40)),n.vertices.push(new d.Vector3(i,0,40)),this.scene.add(new d.Line(n,t)),n=new d.Geometry,n.vertices.push(new d.Vector3(-40,0,i)),n.vertices.push(new d.Vector3(40,0,i)),this.scene.add(new d.Line(n,t))}}},{key:"update",value:function(t){this.app.time+=.01;var e=this.app.time;e=20;var i=20*Math.sin(e),n=8,r=20*Math.cos(e);this.camera.position.set(i,n,r),this.camera.lookAt(new d.Vector3(0,0,0)),this.updateForce(t.force)}},{key:"updateForce",value:function(t){this.force.normalize(),this.force.multiplyScalar(t),this.updateForceArrow()}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(f.default);e.default=g},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function h(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=i(1),l=(r(c),i(5)),f=r(l),p=(i(2),i(4)),d=i(3),v=n(d),y=i(7),w=(r(y),i(6)),m=(r(w),i(14)),g=i(9),b=i(10),M=r(b),k=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.app={},i.width=i.el.offsetWidth,i.height=i.el.offsetHeight,i}return s(e,t),u(e,[{key:"setup",value:function(){this.app.width=this.width,this.app.height=this.height,this.app.view_angle=15,this.app.aspect=this.width/this.height,this.app.near=.1,this.app.far=1e3,this.app.iterations=0,this.app.time=0,this.renderer=new v.WebGLRenderer({antialias:!0,canvas:this.el}),this.scene=new v.Scene,this.camera=new v.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.ambientLight=new v.AmbientLight(13421772),this.directionalLight=new v.DirectionalLight(3355443,.5),this.pointLight1=new v.PointLight(3355443,2,800),this.pointLight2=new v.PointLight(3355443,2,800),this.directionalLight.position.set(0,0,-1),this.pointLight1.position.set(0,10,-10),this.pointLight2.position.set(0,10,-10),this.directionalLight.lookAt(new v.Vector3(0,0,0)),this.pointLight1.lookAt(new v.Vector3(0,0,0)),this.pointLight2.lookAt(new v.Vector3(0,0,0)),this.scene.add(this.directionalLight),this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(1.5),this.renderer.setClearColor(14540253),this.setupTrack(),this.addFloor();var t=(0,p.getElapsedTime)();this.addGrassyField(),console.log("Create grassy field time:",(0,p.getElapsedTime)()-t),this.force=new v.Vector3(0,0,1),this.dest=this.force.clone(),this.dest.multiplyScalar(-1)}},{key:"setupTrack",value:function(){this.camera.position.set(0,30,80),this.camera.lookAt(new v.Vector3(0,0,0))}},{key:"addForceArrow",value:function(){this.forceArrow=new v.ArrowHelper(this.force,this.dest,h(this.force),0),this.scene.add(this.forceArrow)}},{key:"updateForceArrow",value:function(){this.dest=this.force.clone(),this.dest.multiplyScalar(-1),this.forceArrow.setLength(h(this.force)),this.forceArrow.position.x=this.force.x,this.forceArrow.position.y=this.force.y,this.forceArrow.position.z=this.force.z,this.forceArrow.position.multiplyScalar(-1)}},{key:"addGrassyField",value:function(){this.field=new m.GrassyField(30,30,9,30,this.floor.f),this.fieldMesh=new v.Mesh(this.field.geometry(),this.grassMaterial),this.scene.add(this.fieldMesh)}},{key:"addTombstone",value:function(t,e){var i=new v.BoxGeometry(4,8,1),n=new v.MeshPhongMaterial({color:3355443,emissive:7829367,specular:0,reflectivity:0,shininess:0,shading:v.SmoothShading,side:v.DoubleSide}),r=new v.Mesh(i,n);r.position.x=t,r.position.y=4,r.position.z=e,this.scene.add(r)}},{key:"setWind",value:function(t){this.wind=t,this.fieldMesh.material.uniforms.wind.value=t}},{key:"setPhong",value:function(t){this.grassMaterial=this.field.material(t),this.fieldMesh.material=this.grassMaterial}},{key:"addFloor",value:function(){var t=new v.MeshBasicMaterial({color:838860,wireframe:!0}),e=function(){var t=80,e=new M.default("whatever");return function(i,n){return 4*e.noise2D(i/t,n/t)}}();this.floor=new g.Land({height:20,width:20,floor:e});var i=this.floor.getMesh();this.scene.add(new v.Mesh(i,t))}},{key:"update",value:function(t){var e=+new Date/3e5,i=70,n=(i*Math.cos(e),i*Math.sin(e),i*Math.cos(e)),r=i/2,o=i*Math.sin(e);this.camera.position.set(n,r,o),this.camera.lookAt(new v.Vector3(0,0,0))}},{key:"setupCamera",value:function(){this.camera=new v.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far)}},{key:"setSize",value:function(t,e){this.app.width=t,this.app.height=e,this.app.aspect=t/e,this.setupCamera(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.app.width,this.app.height)}},{key:"resize",value:function(t,e){this.setSize(t,e)}},{key:"updateForce",value:function(t){this.force.normalize(),this.force.multiplyScalar(t),this.updateForceArrow()}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(f.default);e.default=k},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,i){var n=Math.sqrt(t*t+e*e+i*i),r=Math.acos(i/n),o=Math.atan(e/t);return[n,r,o]}function a(t,e,i){return new c.LineSegments(new l.SphereSurface(t,119).build(),new c.LineBasicMaterial({color:0}))}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(3),c=n(u),l=i(18),f=i(13),p=function(){function t(e){r(this,t),this.id=e.id,this.el=document.getElementById(this.id),this.app={},this.width=this.el.offsetWidth,this.height=this.el.offsetHeight}return h(t,[{key:"setup",value:function(){var t=this;this.app={view_angle:15,aspect:this.width/this.height,near:.1,far:2e3},this.setupCamera(),this.scene=new c.Scene,this.renderer=new c.WebGLRenderer({antialias:!0,canvas:this.el}),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(16777215,1),this.renderer.setPixelRatio(1.5),document.body.appendChild(this.renderer.domElement),this.grids=[a(function(t,e){return.22*Math.sin(11*(t+e))+1.3},10,10)],this.group=new c.Group,this.grids.forEach(function(e,i){e.rotation.x=Math.PI/2,t.group.add(e)}),this.obscurum=this.getObscuredShape(),this.group.position.set(0,3,0),this.obscurum.position.set(0,3,0),this.scene.add(this.obscurum),this.resize(this.width,this.height),this.camera.position.set(90,0,0),this.updatePosition(0,0),this.loadLucy(),this.setupLights()}},{key:"loadLucy",value:function(){var t=this,e=new c.PLYLoader;e.load("obj/Lucy100k.ply",function(e){e.scale(.0058,.0058,.0058),e.computeVertexNormals();var i=new c.Mesh(e,new c.MeshPhongMaterial({color:12021369,emissive:0,specular:9342464,shininess:20}));i.rotation.set(0,-Math.PI/2,0),t.scene.add(i)})}},{key:"getBetweenPoint",value:function(t,e){var i=.5;return[i*(e.x-t.x)+t.x,i*(e.y-t.y)+t.y,i*(e.z-t.z)+t.z]}},{key:"getObscuredShape",value:function(){var t=new c.Group,e=new c.Mesh(new c.SphereGeometry(.6,20,20),new c.MeshBasicMaterial({color:16777215}));e.position.set(0,0,9);var i=new c.Mesh(new c.BoxGeometry(3,3,3),new c.MeshBasicMaterial({color:16766720}));return i.position.set(.5,0,-8),i.rotation.set(1,-2,-.3),t.add(e),t.add(i),t}},{key:"eventHandlers",value:function(){var t=this,e=this,i={x:0,y:0};return{resize:(0,f.debounce)(100,function(i){Math.min(window.innerWidth,window.innerHeight);t.width=window.innerWidth,t.height=window.innerHeight,e.resize(t.width,t.height)}),move:(0,f.debounce)(10,function(e){i.x=e.clientX,i.y=e.clientY;var n=.5*(2*i.y/window.innerHeight-1),r=.5*(2*i.x/window.innerWidth-1);t.updatePosition(n,r)})}}},{key:"updatePosition",value:function(t,e){var i=new c.Vector3(.5,t,e);i.multiplyScalar(88),this.camera.position.copy(i)}},{key:"update",value:function(t){var e=this.getBetweenPoint(this.camera.position,this.group.position),i=s(e,3),n=i[0],r=i[1],a=i[2],h=o(n,r,a),u=s(h,3);u[0],u[1],u[2];this.camera.lookAt(this.group.position),this.camera.lookAt(0,0,0),this.obscurum.lookAt(this.camera.position),this.group.rotation.y=+new Date/1e3}},{key:"setupLights",value:function(){var t=[];t[0]=new c.PointLight(16777215,1,100,2),t[1]=new c.PointLight(16777215,1,100,2),t[2]=new c.PointLight(16777215,1,100,2),t[3]=new c.AmbientLight(4473924),t[4]=new c.DirectionalLight(5592405,.5),t[0].position.set(0,0,10),t[1].position.set(10,0,0),t[2].position.set(-1,-2,-1),t[3].position.set(-1,-2,-1),t[4].position.set(10,0,10),t[4].position.normalize(),t.forEach(function(t){t.add(new c.Mesh(new c.SphereGeometry(1,20,20),new c.MeshBasicMaterial({wireframe:!0,color:0})))}),this.scene.add(t[0]),this.scene.add(t[1]),this.scene.add(t[2]),this.scene.add(t[3]),this.scene.add(t[4])}},{key:"setupCamera",value:function(){this.camera=new c.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far)}},{key:"resize",value:function(t,e){}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),t}();e.default=p},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function h(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}function u(t){return parseInt(t.substring(1),16)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(1),f=(r(l),i(5)),p=r(f),d=(i(2),i(4)),v=i(3),y=n(v),w=i(7),m=(r(w),i(6)),g=(r(m),i(10)),b=r(g),M=i(8),k=(r(M),i(58)),_=i(9),P=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.app={},i.width=i.el.offsetWidth,i.height=i.el.offsetHeight,i}return s(e,t),c(e,[{key:"setup",value:function(){this.app.width=this.width,this.app.height=this.height,this.app.view_angle=15,this.app.aspect=this.width/this.height,this.app.near=.1,this.app.far=1e3,this.app.iterations=0,this.app.time=0,this.renderer=new y.WebGLRenderer({antialias:!0,canvas:this.el}),this.scene=new y.Scene,this.camera=new y.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.ambientLight=new y.AmbientLight(13421772),this.directionalLight=new y.DirectionalLight(3355443,.5),this.pointLight1=new y.PointLight(3355443,2,800),this.pointLight2=new y.PointLight(3355443,2,800),this.directionalLight.position.set(0,0,-1),this.pointLight1.position.set(0,10,-10),this.pointLight2.position.set(0,10,-10),this.directionalLight.lookAt(new y.Vector3(0,0,0)),this.pointLight1.lookAt(new y.Vector3(0,0,0)),this.pointLight2.lookAt(new y.Vector3(0,0,0)),this.scene.add(this.directionalLight),this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(1.2),this.renderer.setClearColor(16777215),this.setupTrack(),this.addFloor();var t=(0,d.getElapsedTime)();this.addGrassyField(),console.log("Create grassy field time:",(0,d.getElapsedTime)()-t),this.force=new y.Vector3(0,0,1),this.dest=this.force.clone(),this.dest.multiplyScalar(-1),this.loadObjs()}},{key:"setupTrack",value:function(){this.camera.position.set(0,30,80),this.camera.lookAt(new y.Vector3(0,0,0))}},{key:"addForceArrow",value:function(){this.forceArrow=new y.ArrowHelper(this.force,this.dest,h(this.force),0),this.scene.add(this.forceArrow)}},{key:"updateForceArrow",value:function(){this.dest=this.force.clone(),this.dest.multiplyScalar(-1),this.forceArrow.setLength(h(this.force)),this.forceArrow.position.x=this.force.x,this.forceArrow.position.y=this.force.y,this.forceArrow.position.z=this.force.z,this.forceArrow.position.multiplyScalar(-1)}},{key:"addGrassyField",value:function(){console.log("Meow!"),this.field=new k.InstancedGrassyField(30,30,9,30,this.floor.f),this.fieldMesh=new y.Mesh(this.field.geometry(),this.grassMaterial),this.scene.add(this.fieldMesh),console.log(">>>>>")}},{key:"setPhong",value:function(t){var e=t.color,i=t.emissive,n=t.specular,r=t.shininess,o=t.reflectivity;this.grassMaterial=new y.MeshPhongMaterial({color:u(e),emissive:u(i),specular:u(n),shininess:r,reflectivity:o,shading:y.SmoothShading,side:y.DoubleSide}),this.fieldMesh.material=this.grassMaterial}},{key:"addTombstone",value:function(t,e){var i=new y.BoxGeometry(4,8,1),n=new y.MeshPhongMaterial({color:3355443,emissive:7829367,specular:0,reflectivity:0,shininess:0,shading:y.SmoothShading,side:y.DoubleSide}),r=new y.Mesh(i,n);r.position.x=t,r.position.y=4,r.position.z=e,this.scene.add(r)}},{key:"loadObjs",value:function(){var t=new y.OBJLoader,e=this.scene;t.load("obj/Tombstone.obj",function(t){e.add(t)},function(t){},function(t){console.error(t);
})}},{key:"addTombstones",value:function(){}},{key:"addFloor",value:function(){var t=(new y.MeshPhongMaterial({color:209715,emissive:0,specular:0,shininess:0,shading:y.SmoothShading,side:y.DoubleSide}),function(){var t=80,e=new b.default("whatever");return function(i,n){return 4*e.noise2D(i/t,n/t)}}());this.floor=new _.Land({height:50,width:50,floor:t})}},{key:"addGrid",value:function(){for(var t=new y.LineBasicMaterial({color:12040122}),e=100,i=-e;i<=e;i++){var n=new y.Geometry;n.vertices.push(new y.Vector3(i,0,-80)),n.vertices.push(new y.Vector3(i,0,80)),this.scene.add(new y.Line(n,t)),n=new y.Geometry,n.vertices.push(new y.Vector3(-80,0,i)),n.vertices.push(new y.Vector3(80,0,i)),this.scene.add(new y.Line(n,t))}}},{key:"update",value:function(t){var e=+new Date/1e5,i=90,n=(i*Math.cos(e),i*Math.sin(e),t.y),r=i*Math.cos(e),o=n,a=i*Math.sin(e);this.camera.position.set(r,o,a),this.camera.lookAt(new y.Vector3(0,0,0))}},{key:"setupCamera",value:function(){this.camera=new y.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far)}},{key:"setSize",value:function(t,e){this.app.width=t,this.app.height=e,this.app.aspect=t/e,this.setupCamera(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.app.width,this.app.height)}},{key:"resize",value:function(t,e){this.setSize(t,e)}},{key:"updateForce",value:function(t){this.force.normalize(),this.force.multiplyScalar(t),this.updateForceArrow()}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(p.default);e.default=P},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(3),h=r(s),u=i(59),c=i(10),l=n(c),f=i(9),p=i(12),d=n(p),v=function(){function t(e){o(this,t),this.id=e.id,this.el=document.getElementById(this.id),this.app={},this.width=this.el.offsetWidth,this.height=this.el.offsetHeight}return a(t,[{key:"setup",value:function(){this.app.width=this.width,this.app.height=this.height,this.app.view_angle=15,this.app.aspect=this.width/this.height,this.app.near=.1,this.app.far=2e3,this.app.iterations=0,this.app.time=0,this.renderer=new h.WebGLRenderer({antialias:!0,canvas:this.el}),this.scene=new h.Scene,this.camera=new h.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.setupCamera(),this.ambientLight=new h.AmbientLight(13421772),this.directionalLight=new h.DirectionalLight(3355443,.5),this.pointLight1=new h.PointLight(3355443,2,800),this.pointLight2=new h.PointLight(3355443,2,800),this.directionalLight.position.set(0,0,-1),this.pointLight1.position.set(0,10,-10),this.pointLight2.position.set(0,10,-10),this.directionalLight.lookAt(new h.Vector3(0,0,0)),this.pointLight1.lookAt(new h.Vector3(0,0,0)),this.pointLight2.lookAt(new h.Vector3(0,0,0)),this.scene.add(this.directionalLight),this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(1.2),this.renderer.setClearColor(16729200),this.renderer.setClearColor(0),this.sky=new u.AbstractSky({size:300,sunPosition:[1,0,0],simulacrum:!0}),this.sim=new u.SimulacrumSky({size:.2,sunPosition:[1,0,0]}),this.scene.add(this.sim.object()),this.addFloor()}},{key:"set",value:function(t){this.sky.set(t),this.sim.set(t)}},{key:"setGlobePosition",value:function(t,e){this.sky.setGlobePosition(t,e),this.sim.setGlobePosition(t,e)}},{key:"addFloor",value:function(){var t=this,e=(new h.MeshPhongMaterial({color:3276,emissive:0,specular:0,shininess:0,flatShading:!0,side:h.DoubleSide}),function(){var t=30,e=new l.default("whatever");return function(i,n){return 10*e.noise2D(i/t,n/t)}}());this.floor=new f.Land({height:100,width:100,floor:e});var i=new h.FontLoader;i.load("helvetiker.json",function(e){var i=new h.TextGeometry("shake that body, party that bod",{font:e,size:3,height:.01,curveSegments:12,bevelEnabled:!1}),n=new h.MeshBasicMaterial({color:16777215});t.scene.add(new h.Mesh(i,n))});var n=new h.MeshBasicMaterial({color:8738,wireframe:!1,side:h.DoubleSide}),r=new d.default(this.floor.f,4,1e3,1e3);this.scene.add(new h.Mesh(r.build(),n))}},{key:"update",value:function(t){var e=+new Date/200/1,i=e/70,n=(2*Math.PI,i%2*Math.PI,5),r=9,o=0,a=n-6,s=r,h=o;this.sim.objects.group.position.set(a,s,h),this.camera.position.set(n,r,o),this.camera.lookAt(a,s,h)}},{key:"setupCamera",value:function(){this.camera=new h.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.camera.up.set(0,1,0)}},{key:"resize",value:function(t,e){this.app.width=t,this.app.height=e,this.app.aspect=t/e,this.setupCamera(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.app.width,this.app.height)}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),t}();e.default=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i}return a(e,t),s(e,[{key:"addOverlap",value:function(){if(!this.overlaps)return void(this.overlaps=[new l(150,150,30)]);var t=this.overlaps.slice(-1)[0].randomEdge(),e=10+10*Math.random();this.overlaps.push(new l(t[0],t[1],e))}},{key:"setup",value:function(){this.el=document.getElementById(this.id),this.width=this.el.width,this.height=this.el.height,this.ctx=this.el.getContext("2d");for(var t=0;t<4e3;t++)this.addOverlap()}},{key:"update",value:function(){}},{key:"draw",value:function(){var t=this.ctx;this.clear(),this.overlaps.forEach(function(e){e.draw(t)})}},{key:"clear",value:function(){var t=this.ctx;t.fillStyle="black",t.fillRect(0,0,this.width,this.height)}}]),e}(u.default);e.default=c;var l=function(){function t(e,i,n){r(this,t),this.x=e,this.y=i,this.rad=n}return s(t,[{key:"randomEdge",value:function(){var t=2*Math.random()*Math.PI;return[this.x+this.rad*Math.cos(t),this.y+this.rad*Math.sin(t)]}},{key:"draw",value:function(t){t.beginPath(),t.strokeStyle="white",t.lineWidth="1",t.arc(this.x,this.y,this.rad,0,2*Math.PI),t.stroke()}}]),t}()},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=i(1),l=(r(c),i(5)),f=r(l),p=i(2),d=i(3),v=n(d),y=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.app={},i.width=i.el.offsetWidth,i.height=i.el.offsetHeight,i}return s(e,t),u(e,[{key:"setup",value:function(){this.app.width=this.width,this.app.height=this.height,this.app.view_angle=15,this.app.aspect=this.width/this.height,this.app.near=.1,this.app.far=1e4,this.app.iterations=0,this.app.time=0,this.renderer=new v.WebGLRenderer({antialias:!0,canvas:this.el}),this.scene=new v.Scene,this.camera=new v.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.pointLight1=new v.PointLight(4482662),this.pointLight2=new v.PointLight(6702148),this.ambientLight=new v.AmbientLight(12303291),this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(new v.Color(16772863)),this.loadObj(),this.app.time=0;for(var t=new v.MeshPhongMaterial({color:15663103}),e=0;e<5;e++)for(var i=0;i<10;i++){var n=2*(e-2),r=0,o=-3*i-1,a=new v.BoxGeometry(1.5,2+i,2),s=new v.Mesh(a,t);s.position.set(n,r,o),this.scene.add(s)}this.cameraTrack=this.quentin(this.camera.position,(0,p.scale)(this.camera.position,.75)),this.camera.position.set(0,0,40);var h=[this.camera.position.x,this.camera.position.y,this.camera.position.z],u=this.getPlane(this.camera.fov,h,[0,0,0]);this.backwall=this.getPlaneWidth(this.camera.fov,h,[0,0,0]),this.view_angle=this.getFov(this.backwall,h,[0,0,0]),this.scene.add(this.getDot(u[0])),this.scene.add(this.getDot(u[1])),this.scene.add(this.getDot(u[2])),this.scene.add(this.getDot(u[3]))}},{key:"loadObj",value:function(){this.obj_file="obj/trees/AS12_6.obj";var t=new v.LoadingManager;t.onProgress=function(){};var e=new v.OBJLoader(t);e.load(this.obj_file,function(t){t.position.x=0,t.position.y=-1.5,t.position.z=0,this.scene.add(t),console.log("Added")}.bind(this))}},{key:"getDot",value:function(t,e){var i=h(t,3),n=i[0],r=i[1],o=i[2];e=e||0;var a=new v.Geometry;a.vertices.push(new v.Vector3(n,r,o));var s=new v.PointsMaterial({size:3,sizeAttenuation:!1,color:e});return new v.Points(a,s)}},{key:"update",value:function(){this.app.time+=.01;var t=this.app.time/3%1,e=0,i=0,n=40,r=[0,0,40],o=[0,0,1.5],a=(0,p.add)((0,p.scale)(r,1-t),(0,p.scale)(o,t)),s=h(a,3);e=s[0],i=s[1],n=s[2],this.camera.position.set(e,i,n),this.camera.lookAt(new v.Vector3(0,0,0)),this.camera.fov=this.getFov(this.backwall,[e,i,n],[0,0,0]),this.camera.updateProjectionMatrix(),this.pointLight1.position.set(-20,25,0),this.pointLight1.lookAt(new v.Vector2(0,0,0)),this.pointLight2.position.set(20,25,0),this.pointLight2.lookAt(new v.Vector3(0,0,0))}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(f.default);e.default=y},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=i(1),l=r(c),f=i(6),p=r(f),d=i(3),v=n(d),y=i(2),w=function(){function t(e,i){s(this,t),this.center=[0,0,0],this.direction=(0,y.normalize)([1,1,0]),this.position=[0,0,0],this.width=1,this.vertices=[],this.faces=[],this.points=[],this.slopes=[]}return u(t,[{key:"computePoints",value:function(){var t=[],e=[],i=0,n=Math.PI/90,r=1,o=(0,y.scale)((0,y.normalize)([4,0,0]),r),a=h(o,3),s=a[0],u=a[1],c=a[2],l=0,f=0,p=0,d=this.direction.slice(),v=h(d,3),w=v[0],m=v[1],g=v[2],b=function(t){return[r*Math.cos(t),r*Math.sin(t)]};t.push([s,u,c]),e.push([w,m,g]);for(var M=1;M<230;M++){b(i),b(i+n);l=s,f=u,p=c,s+=w,u+=m,c+=g;var k=(0,y.scale)((0,y.normalize)([s,u,c]),r),_=h(k,3);s=_[0],u=_[1],c=_[2];var P=(0,y.scale)((0,y.normalize)([Math.random(),Math.random(),Math.random()]),.05),x=(0,y.sub)([s,u,c],[l,f,p]),E=h(x,3);w=E[0],m=E[1],g=E[2];var O=(0,y.scale)((0,y.normalize)((0,y.sub)([w,m,g],P)),.3),S=h(O,3);w=S[0],m=S[1],g=S[2],t.push([s,u,c]),e.push([w,m,g]),i+=n,r+=.015}this.points=t,this.slopes=e}},{key:"disturbVertices",value:function(){this.vertices.forEach(function(t){var e=.1;t[0]+=e*(Math.random()-.5),t[1]+=e*(Math.random()-.5),t[2]+=e*(Math.random()-.5),t[3]+=e*(Math.random()-.5)})}}]),t}(),m=function(t){function e(t){s(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.app={},i.width=i.el.offsetWidth,i.height=i.el.offsetHeight,i}return a(e,t),u(e,[{key:"setup",value:function(){this.app.width=this.width,this.app.height=this.height,this.app.view_angle=15,this.app.aspect=this.width/this.height,this.app.near=.1,this.app.far=1e4,this.app.iterations=0,this.app.time=0,this.renderer=new v.WebGLRenderer({antialias:!0,canvas:this.el}),this.camera=new v.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.camera.position.set(0,0,40),this.camera.position.up=new v.Vector3(0,1,0),this.camera.lookAt(new v.Vector3(0,0,0)),this.scene=new v.Scene,this.pointLight1=new v.PointLight(4482662),this.pointLight2=new v.PointLight(6702148),this.ambientLight=new v.AmbientLight(10066329),this.scene=new v.Scene,this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight);var t=new v.BoxGeometry(.1,.1,.1),e=new v.WireframeGeometry(t);new v.LineBasicMaterial({color:16777215,opacity:1,linewidth:3,vertexColors:v.VertexColors});this.lines=new v.LineSegments(e),this.lines.position.x=0,this.lines.position.y=0,this.lines.position.z=0,this.scene.add(this.lines),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(new v.Color(15663103));var i=new w(0,0,0);if(i.computePoints(),i.points.length!=i.slopes.length)throw"Fuck this";for(var n=120,r=(2*Math.PI/n,new p.default),o=i.points.length,a=0;a<o;a++){var s=h(i.points[a],3),u=s[0],c=s[1],l=s[2],f=h(i.slopes[a],3),d=(f[0],f[1],f[2],(0,y.sub)((0,y.normalize)([u,c,l]),(0,y.normalize)(i.center))),m=(0,y.normalize)(i.slopes[a]),g=(0,y.cross)(m,d),b=(0,y.add)([u,c,l],(0,y.scale)(g,.1)),M=h(b,3),k=(M[0],M[1],M[2],(0,y.add)([u,c,l],(0,y.scale)(g,-.1))),_=h(k,3);_[0],_[1],_[2];r.addPoint([u,c,l],g)}this.scene.add(this.toLineSegments(r.build())),this.t=0}},{key:"toLineSegments",value:function(t){return new v.LineSegments(new v.WireframeGeometry(t))}},{key:"getDot",value:function(t,e,i,n){n=n||0;var r=new v.Geometry;r.vertices.push(new v.Vector3(t,e,i));var o=new v.PointsMaterial({size:2,sizeAttenuation:!1,color:n});return new v.Points(r,o)}},{key:"update",value:function(){this.lines.rotation.x+=.01,this.lines.rotation.y-=.05,this.lines.rotation.z+=.02,this.t+=.01,this.camera.x=Math.cos,this.camera.position.set(30*Math.sin(-.7*this.t),0,30*Math.cos(.7*this.t)),this.camera.lookAt(new v.Vector3(0,0,0))}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(l.default);e.default=m},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function h(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}function u(t){return parseInt(t.substring(1),16)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(1),f=(r(l),i(5)),p=r(f),d=(i(2),i(4)),v=i(3),y=n(v),w=i(7),m=(r(w),i(6)),g=(r(m),i(10)),b=r(g),M=i(8),k=(r(M),i(14)),_=i(9),P=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.app={},i.width=i.el.offsetWidth,i.height=i.el.offsetHeight,i}return s(e,t),c(e,[{key:"setup",value:function(){this.app.width=this.width,this.app.height=this.height,this.app.view_angle=15,this.app.aspect=this.width/this.height,this.app.near=.1,this.app.far=1e3,this.app.iterations=0,this.app.time=0,this.renderer=new y.WebGLRenderer({antialias:!0,canvas:this.el}),this.scene=new y.Scene,this.camera=new y.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.ambientLight=new y.AmbientLight(13421772),this.directionalLight=new y.DirectionalLight(3355443,.5),this.pointLight1=new y.PointLight(3355443,2,800),this.pointLight2=new y.PointLight(3355443,2,800),this.directionalLight.position.set(0,0,-1),this.pointLight1.position.set(0,10,-10),this.pointLight2.position.set(0,10,-10),this.directionalLight.lookAt(new y.Vector3(0,0,0)),this.pointLight1.lookAt(new y.Vector3(0,0,0)),this.pointLight2.lookAt(new y.Vector3(0,0,0)),this.scene.add(this.directionalLight),this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(1.2),this.renderer.setClearColor(16777215),this.setupTrack(),this.addFloor();var t=(0,d.getElapsedTime)();this.addGrassyField(),console.log("Create grassy field time:",(0,d.getElapsedTime)()-t),this.force=new y.Vector3(0,0,1),this.dest=this.force.clone(),this.dest.multiplyScalar(-1),this.loadObjs()}},{key:"setupTrack",value:function(){this.camera.position.set(0,30,80),this.camera.lookAt(new y.Vector3(0,0,0))}},{key:"addForceArrow",value:function(){this.forceArrow=new y.ArrowHelper(this.force,this.dest,h(this.force),0),this.scene.add(this.forceArrow)}},{key:"updateForceArrow",value:function(){this.dest=this.force.clone(),this.dest.multiplyScalar(-1),this.forceArrow.setLength(h(this.force)),this.forceArrow.position.x=this.force.x,this.forceArrow.position.y=this.force.y,this.forceArrow.position.z=this.force.z,this.forceArrow.position.multiplyScalar(-1)}},{key:"addGrassyField",value:function(){this.field=new k.GrassyField(90,90,5,30,this.floor.f),this.fieldMesh=new y.Mesh(this.field.geometry(),this.grassMaterial),this.scene.add(this.fieldMesh)}},{key:"setPhong",value:function(t){var e=t.color,i=t.emissive,n=t.specular,r=t.shininess,o=t.reflectivity;this.grassMaterial=new y.MeshPhongMaterial({color:u(e),emissive:u(i),specular:u(n),shininess:r,reflectivity:o,shading:y.SmoothShading,side:y.DoubleSide}),this.fieldMesh.material=this.grassMaterial}},{key:"addTombstone",value:function(t,e){var i=new y.BoxGeometry(4,8,1),n=new y.MeshPhongMaterial({color:3355443,emissive:7829367,specular:0,reflectivity:0,shininess:0,shading:y.SmoothShading,side:y.DoubleSide}),r=new y.Mesh(i,n);r.position.x=t,r.position.y=4,r.position.z=e,this.scene.add(r)}},{key:"loadObjs",value:function(){var t=new y.OBJLoader,e=this.scene;t.load("obj/Tombstone.obj",function(t){e.add(t)},function(t){},function(t){console.error(t)})}},{key:"addTombstones",value:function(){}},{key:"addFloor",value:function(){var t=(new y.MeshPhongMaterial({color:209715,emissive:0,specular:0,shininess:0,shading:y.SmoothShading,side:y.DoubleSide}),function(){var t=80,e=new b.default("whatever");return function(i,n){return 4*e.noise2D(i/t,n/t)}}());this.floor=new _.Land({height:50,width:50,floor:t})}},{key:"addGrid",value:function(){for(var t=new y.LineBasicMaterial({color:12040122}),e=100,i=-e;i<=e;i++){var n=new y.Geometry;n.vertices.push(new y.Vector3(i,0,-80)),n.vertices.push(new y.Vector3(i,0,80)),this.scene.add(new y.Line(n,t)),n=new y.Geometry,n.vertices.push(new y.Vector3(-80,0,i)),n.vertices.push(new y.Vector3(80,0,i)),this.scene.add(new y.Line(n,t))}}},{key:"update",value:function(t){var e=+new Date/1e5,i=90,n=(i*Math.cos(e),i*Math.sin(e),t.y),r=i*Math.cos(e),o=n,a=i*Math.sin(e);this.camera.position.set(r,o,a),this.camera.lookAt(new y.Vector3(0,0,0))}},{key:"setupCamera",value:function(){this.camera=new y.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far)}},{key:"setSize",value:function(t,e){this.app.width=t,this.app.height=e,this.app.aspect=t/e,this.setupCamera(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.app.width,this.app.height)}},{key:"resize",value:function(t,e){this.setSize(t,e)}},{key:"updateForce",value:function(t){this.force.normalize(),this.force.multiplyScalar(t),this.updateForceArrow()}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(p.default);e.default=P},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=i(22),l=n(c),f=(i(4),function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.el=t.el,i.width=i.el.width,i.height=i.el.height,i.ctx=i.el.getContext("2d"),i.color="rgb(0, 200, 100)",i.smile=new l.default({position:[i.width/2,i.height/2],size:30}),i}return a(e,t),s(e,[{key:"update",value:function(t){this.color=t.color||"#000000",this.smile.update(t)}},{key:"draw",value:function(){this.ctx.save(),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.restore(),this.ctx.save(),this.ctx.lineWidth=3,this.ctx.fillStyle=this.ctx.strokeStyle=this.color,this.smile.draw(this.ctx),this.ctx.restore()}}]),e}(u.default));e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=function(){function t(e,i,n){a(this,t),this.x=e,this.y=i,this.r=n,this.dots=[],this.addEdge(),this.addEdge(),this.addEdge(),this.addEdge()}return s(t,[{key:"addEdge",value:function(){var t=this.dots.slice(-1);if(t=!!t.length&&t[0]){var e=2*Math.random()*Math.PI;this.dots.push({x:t.x+t.r*Math.cos(e),y:t.y+t.r*Math.sin(e),r:this.r/3})}else this.dots=[{x:this.x,y:this.y,r:this.r/3}]}},{key:"update",value:function(){}},{key:"draw",value:function(t,e){var i=this,n=["cyan","yellow","magenta"],r=0;this.dots.forEach(function(o){t.save(),t.globalCompositeOperation="lighter",r++,t.fillStyle=n[r%n.length],t.beginPath(),t.arc(o.x,o.y,o.r,0,2*Math.PI),t.fill(),t.restore(),e&&e.call(i,t)})}},{key:"nudged",value:function(e,i,n){return new t(this.x+e,this.y+i,this.r+n)}}]),t}(),l=function(t){function e(t){a(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i}return o(e,t),s(e,[{key:"setup",value:function(){this.el=document.getElementById(this.id),this.width=this.el.width,this.height=this.el.height,this.ctx=this.el.getContext("2d"),this.splotches=[];for(var t=0;t<100;t++){var e=Math.random()*this.width,i=Math.random()*this.height,n=10+20*Math.random();this.splotches.push(new c(e,i,n))}}},{key:"update",value:function(){}},{key:"draw",value:function(){var t=this.ctx;this.clear(),this.splotches.forEach(function(e){e.draw(t)})}},{key:"clear",value:function(){var t=this.ctx;t.fillStyle="black",t.fillRect(0,0,this.width,this.height)}}]),e}(u.default);e.default=l},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function h(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}function u(t){return parseInt(t.substring(1),16)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),f=i(1),p=(r(f),i(5)),d=r(p),v=(i(2),i(4)),y=i(3),w=n(y),m=i(60),g=i(7),b=(r(g),i(6)),M=(r(b),i(10)),k=r(M),_=i(14),P=i(9),x=i(12),E=r(x),O=(new w.Vector3(-1,0,0),new w.Vector3(0,0,-1),new w.Vector3(1,0,0)),S=(new w.Vector3(0,0,1),function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i.el=document.getElementById(i.id),i.app={},i.width=i.el.offsetWidth,i.height=i.el.offsetHeight,i}return s(e,t),l(e,[{key:"setup",value:function(){this.app.width=this.width,this.app.height=this.height,this.app.view_angle=15,this.app.aspect=this.width/this.height,this.app.near=.1,this.app.far=2e3,this.app.iterations=0,this.app.time=0,this.renderer=new w.WebGLRenderer({antialias:!0,canvas:this.el}),this.scene=new w.Scene,this.camera=new w.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far),this.ambientLight=new w.AmbientLight(13421772),this.directionalLight=new w.DirectionalLight(3355443,.5),this.pointLight1=new w.PointLight(3355443,2,800),this.pointLight2=new w.PointLight(3355443,2,800),this.directionalLight.position.set(0,0,-1),this.pointLight1.position.set(0,10,-10),this.pointLight2.position.set(0,10,-10),this.directionalLight.lookAt(new w.Vector3(0,0,0)),this.pointLight1.lookAt(new w.Vector3(0,0,0)),this.pointLight2.lookAt(new w.Vector3(0,0,0)),this.scene.add(this.directionalLight),this.scene.add(this.pointLight1),this.scene.add(this.pointLight2),this.scene.add(this.ambientLight),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(1.2),this.renderer.setClearColor(16777215),this.sky=this.getSky(),this.scene.add(this.sky.sky),this.setTheta(0),this.setupTrack();(0,v.getElapsedTime)();this.fieldMesh={},this.addFloor(),this.addObelisk([-20,0],16711680),this.addObelisk([0,-20],65535),this.addObelisk([20,0],16711935),this.addObelisk([0,20],65280),this.force=new w.Vector3(0,0,1),this.dest=this.force.clone(),this.dest.multiplyScalar(-1)}},{key:"setupTrack",value:function(){this.camera.position.set(0,30,80),this.camera.lookAt(new w.Vector3(0,0,0))}},{key:"getSky",value:function(){for(var t=(new w.Group,[]),e=700,i=9e4,n=0;n<i;n++){var r=2*Math.random()-1,o=2*Math.random()-1,a=r,s=o,h=2*Math.random()-1;t.push([a,s,h])}return new m.StarrySky(t,e)}},{key:"addForceArrow",value:function(){this.forceArrow=new w.ArrowHelper(this.force,this.dest,h(this.force),0),this.scene.add(this.forceArrow)}},{key:"addGrassyField",value:function(){this.field=new _.GrassyField(20,20,9,30,this.floor.f),this.fieldMesh=new w.Mesh(this.field.geometry(),this.grassMaterial),this.scene.add(this.fieldMesh)}},{key:"setPhong",value:function(t){var e=t.color,i=t.emissive,n=t.specular,r=t.shininess,o=t.reflectivity;this.grassMaterial=new w.MeshPhongMaterial({color:u(e),emissive:u(i),specular:u(n),shininess:r,reflectivity:o,flatShading:!0,side:w.BackSide}),this.fieldMesh.material=this.grassMaterial}},{key:"setTheta",value:function(t){this.skyTheta=t,this.skyAxis=new w.Vector3(Math.cos(-t),Math.sin(-t),0);
}},{key:"addTombstone",value:function(t,e){var i=new w.BoxGeometry(4,8,1),n=new w.MeshPhongMaterial({color:3355443,emissive:7829367,specular:0,reflectivity:0,shininess:0,flatShading:!0,side:w.DoubleSide}),r=new w.Mesh(i,n);r.position.x=t,r.position.y=0,r.position.z=e}},{key:"addFloor",value:function(){var t=(new w.MeshPhongMaterial({color:209715,emissive:0,specular:0,shininess:0,flatShading:!0,side:w.DoubleSide}),function(){var t=80,e=new k.default("whatever");return function(i,n){return 4*e.noise2D(i/t,n/t)}}());this.floor=new P.Land({height:900,width:900,floor:t}),console.log(this.sky.textures);var e=[];this.sky.textures.forEach(function(t,i){e.push(t.image)});var i=new w.CubeTexture(e,w.CubeReflectionMapping);i.wrapS=w.RepeatWrapping,i.wrapT=w.RepeatWrapping,i.repeat.set(4,4),this.cubeCamera=new w.CubeCamera(100,1e3,Math.pow(2,11)),this.scene.add(this.cubeCamera);var n=new w.MeshPhongMaterial({color:13421772,envMap:this.cubeCamera.renderTarget,reflectivity:.95,side:w.BackSide}),r=new E.default(this.floor.f,1,900,900);this.scene.add(new w.Mesh(r.build(),n));var o=new w.BoxGeometry(1,5,1);this.mirrorBox=new w.Mesh(o,n),this.scene.add(this.mirrorBox),this.addGrassyField()}},{key:"addObelisk",value:function(t,e){var i=c(t,2),n=i[0],r=i[1],o=new w.BoxGeometry(1,5,1),a=new w.MeshBasicMaterial({color:e}),s=new w.Mesh(o,a),h=this.floor.f(n,r),u=new w.Vector3(n,h,r);s.position.set(u.x,u.y+2.5,u.z),s.rotation.y=Math.PI/4,this.scene.add(s)}},{key:"addGrid",value:function(){for(var t=new w.LineBasicMaterial({color:10066329}),e=100,i=-e;i<=e;i++){var n=new w.Geometry;n.vertices.push(new w.Vector3(i,0,-80)),n.vertices.push(new w.Vector3(i,0,80)),this.scene.add(new w.Line(n,t)),n=new w.Geometry,n.vertices.push(new w.Vector3(-80,0,i)),n.vertices.push(new w.Vector3(80,0,i)),this.scene.add(new w.Line(n,t))}}},{key:"update",value:function(t){var e=+new Date/200/1,i=Math.PI/4,n=90;i=e/1e4;var r=(n*Math.cos(i),n*Math.sin(i),t.y),o=100,a=r,s=100,h=(2*Math.PI,i%2*Math.PI);this.sky.sky.setRotationFromAxisAngle(this.skyAxis,h),this.camera.position.set(o,a,s),this.camera.lookAt(0,0,0);var u=O.clone();u.multiplyScalar(20),u.y=r,this.sky.sky.position.set(this.camera.position.x,this.camera.position.y,this.camera.position.z),this.cubeCamera.position.copy(this.mirrorBox.position),this.cubeCamera.update(this.renderer,this.scene)}},{key:"setupCamera",value:function(){this.camera=new w.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far)}},{key:"setSize",value:function(t,e){this.app.width=t,this.app.height=e,this.app.aspect=t/e,this.setupCamera(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.app.width,this.app.height)}},{key:"resize",value:function(t,e){this.setSize(t,e)}},{key:"updateForce",value:function(t){this.force.normalize(),this.force.multiplyScalar(t),this.updateForceArrow()}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(d.default));e.default=S},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=i(16),l=(n(c),i(17)),f=(n(l),function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"setup",value:function(){}},{key:"update",value:function(t){}},{key:"clear",value:function(){}},{key:"draw",value:function(){}}]),e}(u.default));e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=function(){function t(e,i,n){a(this,t),this.x=e,this.y=i,this.rad=n}return s(t,[{key:"randomEdge",value:function(){var t=2*Math.random()*Math.PI;return[this.x+this.rad*Math.cos(t),this.y+this.rad*Math.sin(t)]}},{key:"draw",value:function(t){t.beginPath(),t.strokeStyle="cyan",t.lineWidth="1",t.moveTo(this.x+this.rad,this.y);for(var e=1;e<3;e++){var i=2*e*Math.PI/3,n=this.x+this.rad*Math.cos(i),r=this.y+this.rad*Math.sin(i);t.lineTo(n,r)}t.closePath(),t.stroke()}}]),t}(),l=function(t){function e(t){a(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i}return o(e,t),s(e,[{key:"addOverlap",value:function(){if(!this.overlaps)return void(this.overlaps=[new c(150,150,30)]);var t=this.overlaps.slice(-1)[0].randomEdge(),e=10+10*Math.random();this.overlaps.push(new c(t[0],t[1],e))}},{key:"setup",value:function(){this.el=document.getElementById(this.id),this.width=this.el.width,this.height=this.el.height,this.ctx=this.el.getContext("2d");for(var t=0;t<4e3;t++)this.addOverlap()}},{key:"update",value:function(){}},{key:"draw",value:function(){var t=this.ctx;this.clear(),this.overlaps.forEach(function(e){e.draw(t)})}},{key:"clear",value:function(){var t=this.ctx;t.fillStyle="black",t.fillRect(0,0,this.width,this.height)}}]),e}(u.default);e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,i,n){var r=c(n,4),o=r[0],a=r[1],s=r[2],h=r[3],u=i.getPointList(),l=i.getBoundingBox();t.save(),t.beginPath(),t.fillStyle="black",t.strokeStyle="black",t.imageSmoothingEnabled=!0,t.beginPath(),t.moveTo(u[0].x,u[0].y),t.lineTo(u[1].x,u[1].y),t.lineTo(u[2].x,u[2].y),t.clip();for(var f=0;f<3;f++)t.drawImage(e,o,a,s,h,l.x,l.y,l.w,l.h);t.restore()}function h(t,e,i){var n=e.getPointList();t.save(),t.beginPath(),t.fillStyle=i||"black",t.strokeStyle=i||"white",t.lineWidth=1,t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y),t.lineTo(n[2].x,n[2].y),t.fill(),t.fill(),t.fill(),t.fill(),t.stroke(),t.restore()}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=i(1),f=n(l),p=i(4),d=i(11),v=n(d),y=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.el=t.el,i.ctx=i.el.getContext("2d"),i.size=t.size||30,i.width=i.el.width,i.height=i.el.height,i.mesh=new v.default(i.size,{x:0,y:0}),i.colors=t.colors,i.image=t.image,i}return a(e,t),u(e,[{key:"setup",value:function(){}},{key:"update",value:function(){}},{key:"draw",value:function(){for(var t=0;t<11;t++)for(var e=0;e<21;e++){var i=this.mesh.get(t,e),n=(0,p.select)(this.colors),r=0==Math.floor(3*Math.random()),o=i.getBoundingBox();r?s(this.ctx,this.image,i,[o.x,o.y,o.w,o.h]):h(this.ctx,i,n)}}}]),e}(f.default);e.default=y},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=i(19),l=n(c),f=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.id=t.id,i}return a(e,t),s(e,[{key:"setup",value:function(){this.el=document.getElementById(this.id),this.width=this.el.width,this.height=this.el.height,this.ctx=this.el.getContext("2d"),this.grid3=new l.default(this.el,6,6,"red"),this.grid4=new l.default(this.el,6,6,"blue")}},{key:"update",value:function(t){}},{key:"draw",value:function(){var t=this.ctx;this.clear(),t.save(),t.globalCompositeOperation="darken",this.grid3.draw(t),this.grid4.draw(t),t.restore()}},{key:"clear",value:function(){var t=this.ctx;t.fillStyle="white",t.fillRect(0,0,this.width,this.height)}}]),e}(u.default);e.default=f},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,i){return new h.LineSegments(new u.SphereSurface(t,193).build(),new h.LineBasicMaterial({color:0}))}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(3),h=n(s),u=i(18),c=i(13),l=function(){function t(e){r(this,t),this.id=e.id,this.el=document.getElementById(this.id),this.app={},this.width=this.el.offsetWidth,this.height=this.el.offsetHeight}return a(t,[{key:"setup",value:function(){var t=this;this.app={view_angle:15,aspect:this.width/this.height,near:.1,far:2e3},this.meta={lastPosition:new h.Vector3(0,0,0)},this.setupCamera(),this.scene=new h.Scene,this.renderer=new h.WebGLRenderer({antialias:!0,canvas:this.el}),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(16777215,1),this.renderer.setPixelRatio(1.5),document.body.appendChild(this.renderer.domElement),this.grids=[o(function(t,e){return.22*Math.sin(5*(t+e))+4},10,10)],this.group=new h.Group,this.grids.forEach(function(e,i){e.rotation.x=Math.PI/2,t.group.add(e)}),this.scene.add(this.group),this.updatePosition(0,0),this.resize(this.width,this.height)}},{key:"eventHandlers",value:function(){var t=this,e=this,i={x:0,y:0};return{resize:(0,c.debounce)(100,function(i){Math.min(window.innerWidth,window.innerHeight);t.width=window.innerWidth,t.height=window.innerHeight,e.resize(t.width,t.height)}),move:(0,c.debounce)(10,function(e){i.x=e.clientX,i.y=e.clientY;var n=-1*(2*i.y/window.innerHeight-1),r=-1*(2*i.x/window.innerWidth-1);t.updatePosition(n,r)})}}},{key:"updatePosition",value:function(t,e){var i=new h.Vector3(.5,t,e);i.multiplyScalar(88),this.camera.position.copy(i)}},{key:"update",value:function(t){this.meta.lastPosition.equals(this.camera.position)||(this.meta.lastPosition.copy(this.camera.position),this.camera.lookAt(0,0,0)),this.group.rotation.y=+new Date/1e3}},{key:"setupCamera",value:function(){this.camera=new h.PerspectiveCamera(this.app.view_angle,this.app.aspect,this.app.near,this.app.far)}},{key:"resize",value:function(t,e){this.width=t,this.height=e,this.app.aspect=this.width/this.height,this.camera.aspect=this.app.aspect,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}}]),t}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(1),c=n(u),l=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.el=t.el,i.ctx=t.el.getContext("2d");var n=i.el.width,a=i.el.height;return i.cols=t.x||10,i.rows=t.y||10,i.dx=n/i.cols,i.dy=a/i.rows,i.el.onmousemove=i.drawGridPoints.bind(i),i}return a(e,t),h(e,[{key:"setup",value:function(){console.log(this.el),console.log("changbe")}},{key:"update",value:function(){console.log("changbe updated")}},{key:"draw",value:function(){console.log(this.el,">> draw"),this.clear("white"),this.drawGridPoints()}},{key:"clear",value:function(t){this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.el.width,this.el.height)}},{key:"generateRandomColor",value:function(){var t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),i=Math.floor(256*Math.random());return"rgb("+t+","+e+","+i+")"}},{key:"getBox",value:function(t,e){return[Math.floor(t*this.dx),Math.floor(e*this.dy),Math.ceil(this.dx),Math.ceil(this.dy)]}},{key:"drawGridPoints",value:function(){for(var t=0;t<this.cols;t++)for(var e=0;e<this.rows;e++){this.ctx.fillStyle=this.generateRandomColor();var i=this.getBox(t,e),n=s(i,4),r=n[0],o=n[1],a=n[2],h=n[3];this.ctx.fillRect(r,o,a,h)}}}]),e}(c.default);e.default=l},function(t,e){"use strict"},function(t,e){"use strict";function i(t,e,i,n){return"rgba("+t+", "+e+", "+i+", "+n+")"}function n(){var t=Math.floor(255*Math.random()),e=Math.floor(255*Math.random()),n=Math.floor(255*Math.random()),r=1;return i(t,e,n,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.rgba=i,e.randomRGB=n},function(t,e){"use strict";function i(t,e,i){i=i||50;for(var n=[],r=1/(i-1),o=0;o<i;o++)n.push(o*r);return n}Object.defineProperty(e,"__esModule",{value:!0}),e.line=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return(0,l.scale)((0,l.normalize)(t),e)}function a(t,e){e.forEach(function(e){t.push(e)})}function s(t,e){if(t.length%3!=0)throw"whatever";for(var i=0;i<t.length;i+=3){var n=t[i+0],r=t[i+2];t[i+0]=n*Math.cos(e)+r*Math.sin(e),t[i+2]=-n*Math.sin(e)+r*Math.cos(e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.InstancedGrassyField=void 0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=i(8),l=(n(c),i(2)),f=i(4);e.InstancedGrassyField=function(){function t(e,i,n,o,a){r(this,t),console.log("[Loading instanced grassy field]]"),this.width=e,this.height=i,this.density=n||1,this.variations=o||20,this.blades=[],this.floor=a||void 0,this.vertices=[],this.normals=[];for(var s=0;s<o;s++){var h=Math.PI/30*Math.random(),c=2*Math.PI*(Math.random()-.5),l=this.blade(h,c),f=u(l,2),p=f[0],d=f[1];p=Float32Array.from(p),d=Float32Array.from(d);var v=new THREE.BufferGeometry;v.addAttribute("position",new THREE.BufferAttribute(p,3)),v.addAttribute("normal",new THREE.BufferAttribute(d,3));var y=new THREE.InstancedBufferGeometry;y.addAttribute("position",p),y.addAttribute("normal",d)}return void console.log(this.shader());var p,d}return h(t,[{key:"shader",value:function(){return new THREE.RawShaderMaterial({vertexShader:i(64),fragmentShader:i(63),uniforms:{}})}},{key:"blade",value:function(t,e){var i=this._blade(t),n=u(i,2),r=n[0],o=n[1];return s(r,e),s(o,e),[r,o]}},{key:"_blade",value:function(t){for(var e=0,i=0,n=0,r=10,s=.08+.03*Math.random(),h=.1,c=[],f=[],p=[],d=0;d<=r;d++){var v=t*d,y=[0,Math.cos(v),Math.sin(v)],w=y[0],m=y[1],g=y[2],b=(0,l.cross)([1,0,0],[w,m,g]),M=u(b,3),k=M[0],_=M[1],P=M[2];c.push({delta:o([w,m,g],s),normal:(0,l.normalize)([k,_,P])})}for(var x=0;x<=r;x++){var E=u(c[x].delta,3),O=E[0],S=E[1],j=E[2],T=(r-x+1)/r,k=[e+h*T,i,n],_=[e-h*T,i,n],P=[e+O+h*T,i+S,n+j],A=[e+O-h*T,i+S,n+j];a(f,_),a(f,k),a(f,P),a(f,_),a(f,P),a(f,A);var L=c[x].normal;a(p,L),a(p,L),a(p,L),a(p,L),a(p,L),a(p,L),e+=O,i+=S,n+=j}return[f,p]}},{key:"geometry",value:function(){this.geo=new THREE.BufferGeometry;var t=(0,f.getElapsedTime)(),e=Float32Array.from(this.vertices);this.geo.addAttribute("position",new THREE.BufferAttribute(e,3));var i=Float32Array.from(this.normals);return this.geo.addAttribute("normal",new THREE.BufferAttribute(i,3)),console.log("Copy array time:",(0,f.getElapsedTime)()-t),this.geo}}]),t}()},function(t,e,i){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,i){var n=c(t,3);n[0],n[1],n[2];i=i||.3;var r=new THREE.EdgesGeometry(new THREE.BoxGeometry(i,i,i)),o=new THREE.LineBasicMaterial({color:14540253,linewidth:10});return new THREE.LineSegments(r,o)}function s(t,e){var i=c(t,3),n=i[0],r=i[1],o=i[2],a=new THREE.Geometry;a.vertices.push(new THREE.Vector3(-n,-r,-o)),a.vertices.push(new THREE.Vector3(n,r,o));var s=new THREE.LineBasicMaterial({color:e,linewidth:100});return new THREE.Line(a,s)}function h(t,e,i){var n=c(t,3),r=n[0],o=n[1],a=n[2];i=i||.1;var s=new THREE.Mesh(new THREE.SphereGeometry(i,20,20),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,color:e,wireframe:!0,transparent:!0,opacity:.75}));return s.position.set(r,o,a),s}Object.defineProperty(e,"__esModule",{value:!0}),e.Sky=e.SimulacrumSky=e.AbstractSky=void 0;var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=i(4),f=e.AbstractSky=function(){function t(){o(this,t)}return u(t,[{key:"object",value:function(){}},{key:"set",value:function(){}},{key:"setSunPosition",value:function(t,e,i){}},{key:"setGlobeRotation",value:function(t){}},{key:"setGlobePosition",value:function(t,e){}}]),t}();e.SimulacrumSky=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.size=t?t.size:void 0,i.group=new THREE.Group,i.objects=i.generate(0,0,0),i}return r(e,t),u(e,[{key:"globe",value:function(){var t=new THREE.Group,e=new THREE.Group,i=2*this.size;return e.add(s([i,0,0],16711680)),e.add(s([0,i,0],65280)),e.add(s([0,0,i],255)),e.add(h([0,0,0],13421772,this.size)),t.add(e),t}},{key:"_params",value:function(t){var e=t.sunPosition;t.globeCoordinates;console.log("[SIMULACRUM] Sun is at ",e),console.log("[SIMULACRUM] Located at  ",globleCoordinates)}},{key:"_starbox",value:function(){}},{key:"_blank",value:function(){}},{key:"generate",value:function(t,e,i){var n={},r=new THREE.Group,o=.2,s=new THREE.MeshBasicMaterial({color:14540253,wireframe:!0});n.sun=new THREE.Mesh(new THREE.IcosahedronGeometry(o/4),s),n.world=this.globe(),n.stars=a([0,0,0],13421772,2.9*this.size);var u=(0,l.longlat)([this.size,0,0]);return n.pos=h(u,52428,.025),n.world.add(n.pos),r.add(n.world),r.add(n.sun),r.add(n.stars),{group:r,objects:n}}},{key:"object",value:function(){return this.objects.group}},{key:"setGlobePosition",value:function(t,e){var i=(0,l.longlat)([this.size,t,e]),n=c(i,3),r=n[0],o=n[1],a=n[2];this.objects.objects.pos.position.set(r,o,a)}},{key:"setSunPosition",value:function(t,e,i){var n=new THREE.Vector3(t,e,i);n.normalize(),n.multiplyScalar(4*this.size),this.objects.objects.sun.position.copy(n);var r=-20;this.objects.objects.sun.rotation.set(r*n.x,r*n.y,r*n.z)}},{key:"setGlobeRotation",value:function(t){var e=new THREE.Vector3(0,1,0);e.normalize(),this.objects.objects.world.setRotationFromAxisAngle(e,t)}}]),e}(f),e.Sky=function(){function t(e){var i=e.size;e.sunPosition;o(this,t),this.size=i,this.demoSun=new THREE.Group,this.geo=this.geometry(),this.mat=this.material(),this.sky=new THREE.Group,this.sky.add(new THREE.Mesh(this.geo,this.mat)),this.params={rot:0}}return u(t,[{key:"geometry",value:function(){var t=this.size,e=new THREE.BoxGeometry(t,t,t,1,1,1);return e}},{key:"material",value:function(){return new THREE.ShaderMaterial({transparent:!0,vertexShader:i(66),fragmentShader:i(65),side:THREE.DoubleSide,uniforms:{rayleigh:{value:4},turbidity:{value:4.9},mieDirectionalG:{value:0},mieCoefficient:{value:0},luminance:{value:1},sunPosition:{value:this.demoSun.position},theta:{value:.3},size:{value:this.size}}})}},{key:"setSunPosition",value:function(t,e,i){var n=new THREE.Vector3(t,e,i);n.normalize(),this.demoSun.position.set(n.x,n.y,n.z)}},{key:"set",value:function(t){this.mat.uniforms.rayleigh.value=t.rayleigh||this.mat.uniforms.rayleigh.value,this.mat.uniforms.turbidity.value=t.turbidity||this.mat.uniforms.turbidity.value,this.mat.uniforms.luminance.value=t.luminance||this.mat.uniforms.luminance.value}},{key:"setGlobeRotation",value:function(t){this.params.rot=t%1*2*Math.PI}},{key:"setGlobePosition",value:function(t,e){}}]),t}()},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){try{var i=Math.floor(3*e),n=new THREE.CubeGeometry(e,e,e,1,1,1),r=u(t,i),o=new THREE.Mesh(n,r);return o}catch(t){console.log("Fail",t)}}function o(t){for(var e=-1,i=void 0,n=-1,r=0;r<t.length;r++){var o=Math.abs(t[r]);o>e&&(e=o,i=t[r]>=0?1:-1,n=r)}return[e,i,n]}function a(t,e,i){var n=c(t,3),r=n[0],a=n[1],s=n[2],h=o([r,a,s]),u=c(h,3),l=u[0],f=u[1],p=u[2],d=-1,v=-1,y=0;switch(p){case 0:d=-f*s/l,v=a/l,y=f>0?0:1;break;case 1:d=r/l,v=-f*s/l,y=f>0?2:3;break;case 2:d=f*r/l,v=a/l,y=f>0?4:5;break;default:throw"What the fuck"}return d=(d+1)/2*e,v=(v+1)/2*i,[Math.floor(d),Math.floor(v),y]}function s(t,e){var i=t*e;return new Uint8Array(4*i)}function h(t,e,i){function n(t,e,n,r){r=r||255;var o=4*(n*i+e);t[o+0]=r,t[o+1]=r,t[o+2]=r,t[o+3]=r}function r(t){var n=new THREE.DataTexture(t,e,i,THREE.RGBAFormat,THREE.UnsignedByteType,THREE.UVMapping);return n.needsUpdate=!0,n}for(var o=e*i,h=[],u=0;u<6;u++){var w=Math.floor(255*Math.random());w=0,h.push(s(e,i));for(var m=0;m<o;m++)h[u][4*m+0]=w,h[u][4*m+1]=w,h[u][4*m+2]=w,h[u][4*m+3]=255}t=t||[];var g=0;return t.forEach(function(t){g=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);var r=a(t,e,i),o=c(r,3),s=o[0],u=o[1],l=o[2];s>=0&&u>=0&&n(h[l],s,u,Math.floor(255*g))}),[r(h[l]),r(h[f]),r(h[p]),r(h[d]),r(h[v]),r(h[y])]}function u(t,e){var i=e,n=e,r=({time:{value:1},dir:{value:new THREE.Vector3(0,0,1),type:"v3"}},h(t,i,n)),o=[new THREE.MeshBasicMaterial({map:r[0],side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:r[1],side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:r[2],side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:r[3],side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:r[4],side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:r[5],side:THREE.DoubleSide})];return o}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.sky=r;var l=(i(68),i(67),0),f=1,p=2,d=3,v=4,y=5;e.StarrySky=function t(e,i){n(this,t),this.stars=e;var o=Math.floor(3*i);this.sky=r(e,i),this.textures=h(e,o,o)}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=e.Subtitle=function(){function t(e,n){i(this,t),n=n||{},this.text=e,this.color=n.color||"black",this.outlineColor=n.outlineColor||"white",this.divWidth=n.width||"100%",this.divHeight=n.height,this.bottom=n.bottom||"0px",this.left=n.left||"0px",this.domElement=this._createDomElement()}return n(t,[{key:"_createDomElement",value:function(){var t=document.createElement("DIV"),e=document.createElement("SPAN");return t.appendChild(e),e.innerHTML=this.text,t.style.color=this.color,t.style.position="fixed",t.style.left=this.left,t.style.bottom=this.bottom,t.style.zIndex="9000",t.style.textShadow="1px 1px white, -1px -1px white, -1px 1px white, 1px -1px white",t.style.width=this.divWidth,this.divHeight&&(t.style.height=this.divHeight),t.style.textAlign="center",t}},{key:"showFor",value:function(t,e){this.show(),setTimeout(function(){this.hide(),void 0!=e&&e.apply(this)}.bind(this),t)}},{key:"show",value:function(){document.body.appendChild(this.domElement)}},{key:"hide",value:function(){document.body.removeChild(this.domElement)}}]),t}();e.SubtitleScript=function(){function t(e){i(this,t),this.style=e,this.functions=[]}return n(t,[{key:"add",value:function(t,e){var i=this;return this.functions.push(function(n){var o=new r(t,i.style);o.showFor(e,i.read.bind(i))}),this}},{key:"read",value:function(){var t=this.functions.shift();t&&t.call()}}]),t}()},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,i){return(0,s.add)((0,s.scale)(e,i),(0,s.scale)(t,1-i))}function o(t,e,i){return new h(r(t,e,i),[0,1,0],void 0)}Object.defineProperty(e,"__esModule",{value:!0}),e.CameraState=e.LinearCameraTrack=e.CameraSequence=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e.line=r,e.linearTrack=o;var s=i(2),h=(e.CameraSequence=function(){function t(){n(this,t),this.tracks=[],this.durations=[],this.stops=[0],this.pieces=[]}return a(t,[{key:"add",value:function(t,e){return this.tracks.push(t),this.stops.push(this.stops[this.stops.length-1]+e),this}},{key:"getIndex",value:function(t){for(var e=0;e<this.stops.length;e++)if(t<this.stops[e])return e-1;return this.stops.length-1}},{key:"at",value:function(t){console.log("t="+t);var e=this.stops[this.getIndex(t)];return this.tracks[this.getIndex(t)].at(t-e)}}]),t}(),function(){function t(){n(this,t)}return a(t,[{key:"at",value:function(){}}]),t}(),e.LinearCameraTrack=function(){function t(e,i,r){n(this,t),this.start=e,this.end=i,this.direction=(0,s.normalize)((0,s.sub)(this.end,this.start)),this.up=[0,1,0],this.duration=r||1}return a(t,[{key:"at",value:function(t){return new h(r(this.start,this.end,t),this.up,void 0)}}]),t}(),e.CameraState=function t(e,i,r){n(this,t),this.position=e,this.up=i,this.fov=r})},function(t,e){t.exports=""},function(t,e){t.exports="#define SHADER_NAME grassy_vert\n\nprecision highp float;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nattribute vec3 position;\nattribute vec3 mcol0;\nattribute vec3 mcol1;\nattribute vec3 mcol2;\nattribute vec3 mcol3;\n\n#ifdef PICKING\nattribute vec3 pickingColor;\n#else\nattribute vec3 color;\nvarying vec3 vPosition;\n#endif\n\nvarying vec3 vColor;\n\nvoid main()\t{\n\n  // ...\n  mat4 matrix = mat4(\n    vec4( mcol0, 0 ),\n    vec4( mcol1, 0 ),\n    vec4( mcol2, 0 ),\n    vec4( mcol3, 1 ),\n  );\n\n  vec3 positionEye = ( modelViewMatrix * matrix * vec4( position, 1.0 ) ).xyz;\n\n#ifdef PICKING\n  vColor = pickingColor;\n#else\n  vColor = color;\n  vPosition = positionEye;\n#endif\n\n  gl_Position = projectionMatrix * vec4( positionEye, 1.0 );\n\n}\n"},function(t,e){t.exports="precision mediump float;\nprecision mediump int;\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nuniform float luminance;\nuniform float mieDirectionalG;\n\nconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float pi = 3.141592653589793238462643383279502884197169;\n\nconst float n = 1.0003; // refractive index of air\nconst float N = 2.545E25; // number of molecules per unit volume for air at\n// 288.15K and 1013mb (sea level -45 celsius)\n\n// optical length at zenith for molecules\nconst float rayleighZenithLength = 8.4E3;\nconst float mieZenithLength = 1.25E3;\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n// 66 arc seconds -> degrees, and the cosine of that\nconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n// 3.0 / ( 16.0 * pi )\nconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n// 1.0 / ( 4.0 * pi )\nconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\nfloat rayleighPhase( float cosTheta ) {\n  return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n}\n\nfloat hgPhase( float cosTheta, float g ) {\n  float g2 = pow( g, 2.0 );\n  float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n  return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n}\n\n// Filmic ToneMapping http://filmicgames.com/archives/75\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nconst float whiteScale = 1.0748724675633854; // 1.0 / Uncharted2Tonemap(1000.0)\n\nvec3 Uncharted2Tonemap( vec3 x ) {\n  return ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\n}\n\nvec4 stars(vec3 pos) {\n  float l = pow(cos(10.*pos.z) + sin(10.*pos.y), 3.0)/4.0;\n  l = 0.0;\n  return vec4(l, l, l, 0.0);\n}\n\n\nvoid main() {\n  // optical length\n  // cutoff angle at 90 to avoid singularity in next formula.\n  float zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\n  float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n  float sR = rayleighZenithLength * inverse;\n  float sM = mieZenithLength * inverse;\n\n  // combined extinction factor\n  vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n  // in scattering\n  float cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\n\n  float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n  vec3 betaRTheta = vBetaR * rPhase;\n\n  float mPhase = hgPhase( cosTheta, mieDirectionalG );\n  vec3 betaMTheta = vBetaM * mPhase;\n\n  vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n  Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n  // nightsky\n  vec3 direction = normalize( vWorldPosition - cameraPos );\n  float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\n  float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\n  vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n  vec3 L0 = vec3( 0.1 ) * Fex;\n\n  // composition + solar disc\n  float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n  L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n  vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n  vec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\n  vec3 color = curr * whiteScale;\n\n  vec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n\n  gl_FragColor = vec4( retColor, 1.0 ) + stars(vWorldPosition);\n}\n";
},function(t,e){t.exports="/*\nprecision mediump float;\nprecision mediump int;\n\nuniform vec3 position;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix; // optional\nuniform mat4 projectionMatrix; // optional\n//*/\n\nuniform float size;\nuniform vec3 sunPosition;\n\n/**\n * \n */\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nuniform float rayleigh;\nuniform float turbidity;\nuniform float mieCoefficient;\n\nconst vec3 up = vec3(0.0, 1.0, 0.0);\n\n// constants for atmospheric scattering\nconst float e = 2.71828182845904523536028747135266249775724709369995957;\nconst float pi = 3.141592653589793238462643383279502884197169;\n\n// wavelength of used primaries, according to preetham\nconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\nconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n// mie stuff\n// K coefficient for the primaries\nconst float v = 4.0;\nconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n\n// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\nconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n// earth shadow hack\n// cutoffAngle = pi / 1.95;\nconst float cutoffAngle = 1.6110731556870734;\nconst float steepness = 1.5;\nconst float EE = 1000.0;\n\nfloat sunIntensity( float zenithAngleCos ) {\n  zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n  return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n}\n\nvec3 totalMie( float T ) {\n\tfloat c = ( 0.2 * T ) * 10E-18;\n\treturn 0.434 * c * MieConst;\n}\n\nvoid main() {\n\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition = worldPosition.xyz;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  gl_Position.z = gl_Position.w; // set z to camera.far\n\n  vSunDirection = normalize( sunPosition );\n\n  vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n  vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n  float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n  // extinction (absorbtion + out scattering)\n  // rayleigh coefficients\n  vBetaR = totalRayleigh * rayleighCoefficient;\n\n  // mie coefficients\n  vBetaM = totalMie( turbidity ) * mieCoefficient;\n\n}\n"},function(t,e){t.exports="uniform float time;\nuniform vec3 dir;\nvarying vec4 n;\n\nvoid main() {\n  float x = sin(time);\n  vec4 u = normalize(vec4(dir, 1.0));\n  vec4 v = normalize(n);\n  float l = dot(u, v);\n  // l = (sin(time) + 1.0)/2.0;\n\n  // gl_FragColor = n;\n  gl_FragColor = vec4(l, l, l, 1.0);\n  // gl_FragColor = vec4(l, l, l, 1.0);\n}\n"},function(t,e){t.exports="varying vec4 n;\nvoid main() {\n  n = vec4(normal, 1.0);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(t,e){t.exports="uniform float time;\nuniform vec3 dir;\nvarying vec4 n;\n\nvoid main() {\n  float x = sin(time);\n  vec4 u = normalize(vec4(dir, 1.0));\n  vec4 v = normalize(n);\n  float l = dot(u, v);\n  // l = (sin(time) + 1.0)/2.0;\n\n  l = 0.2;\n  // gl_FragColor = n;\n  gl_FragColor = vec4(l, l, l, 1.0);\n  // gl_FragColor = vec4(l, l, l, 1.0);\n}\n"},function(t,e){t.exports="varying vec4 n;\nuniform float wind;\nvoid main() {\n  vec4 p = vec4(position, 1.0);\n  p.x += wind;\n  gl_Position = projectionMatrix * modelViewMatrix * p;\n}\n"}]);